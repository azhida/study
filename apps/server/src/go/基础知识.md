# Go 基础知识

## 简介

### 语言特色

- 简洁、快速、安全
- 并行、有趣、开源
- 内存管理、数组安全、编译迅速

### 语言用途

Go 语言被设计成一门应用于搭载 Web 服务器，存储集群或类似用途的巨型中央服务器的系统编程语言。

对于高性能分布式系统领域而言，Go 语言无疑比大多数其它语言有着更高的开发效率。它提供了海量并行的支持，这对于游戏服务端的开发而言是再好不过了。

## 语言环境安装

安装包下载地址为：https://go.dev/dl/。

如果打不开可以使用这个地址：https://golang.google.cn/dl/。


### Linux 系统下安装

#### apt 安装

```sh
sudo apt-get update
sudo apt install -y golang-go
go version
```

#### 编译安装
```sh
# 下载
wget https://golang.google.cn/dl/go1.22.2.linux-amd64.tar.gz

# 解压
tar -C /usr/local -xzf go1.22.2.linux-amd64.tar.gz

# 将 /usr/local/go/bin 目录添加至 PATH 环境变量【临时，关闭终端下次再登录就没有了】
export PATH=$PATH:/usr/local/go/bin
# 将 /usr/local/go/bin 目录添加至 PATH 环境变量【永久】
echo 'export PATH=$PATH:/usr/local/go/bin' >> /etc/profile
source /etc/profile
```
### Windows 系统下安装

[下载地址](https://golang.google.cn/dl/go1.22.2.windows-amd64.msi)

#### 修改环境变量 `GOPATH` 

- windows cmd

```sh
set GOPATH=D:\go
```


## 语言结构

### 基础组成

Go 语言的基础组成有以下几个部分：
- 包声明
- 引入包
- 函数
- 变量
- 语句 & 表达式
- 注释

```go
// hello.go
package main

import "fmt"

func main() {
   /* 这是我的第一个简单的程序 */
   fmt.Println("Hello, World!")
}
```

- `package main` 定义了包名。你必须在源文件中非注释的第一行指明这个文件属于哪个包，如：package main。package main表示一个可独立执行的程序，每个 Go 应用程序都包含一个名为 main 的包。
-  `import "fmt"` 告诉 Go 编译器这个程序需要使用 fmt 包（的函数，或其他元素），fmt 包实现了格式化 IO（输入/输出）的函数。
- `func main()` 是程序开始执行的函数。main 函数是每一个可执行程序所必须包含的，一般来说都是在启动后第一个执行的函数（如果有 init() 函数则会先执行该函数）。
-  `/*...*/` 是注释，在程序执行时将被忽略。单行注释是最常见的注释形式，你可以在任何地方使用以 `//` 开头的单行注释。多行注释也叫块注释，均已以 `/*` 开头，并以 `*/` 结尾，且不可以嵌套使用，多行注释一般用于包的文档描述或注释成块的代码片段。
- `fmt.Println(...)` 可以将字符串输出到控制台，并在最后自动增加换行字符 `\n`。使用 `fmt.Print("hello, world\n")` 可以得到相同的结果。 `Print` 和 `Println` 这两个函数也支持使用变量，如：`fmt.Println(arr)`。如果没有特别指定，它们会以默认的打印格式将变量 `arr` 输出到控制台。
- 当标识符（包括常量、变量、类型、函数名、结构字段等等）以一个大写字母开头，如：`Group1`，那么使用这种形式的标识符的对象就可以被外部包的代码所使用（客户端程序需要先导入这个包），这被称为导出（像面向对象语言中的 `public` ）；标识符如果以小写字母开头，则对包外是不可见的，但是他们在整个包的内部是可见并且可用的（像面向对象语言中的 `protected` ）。

### 执行 Go 程序

```sh
# 运行文件
go run hello.go

# 编辑文件
go build hello.go
# 生成文件 hello.exe

# 执行 hello.exe
./hello.exe
```

### 注意

`{` 不能单独放在一行，否则报错。

```go
package main

import "fmt"

func main()  
{  // 错误，{ 不能在单独的行上
    fmt.Println("Hello, World!")
}
```

## Go 语言基础语法

### Go 标记

Go 程序可以由多个标记组成，可以是关键字，标识符，常量，字符串，符号。如以下 GO 语句由 6 个标记组成：

```go
fmt.Println("Hello, World!")
```

6 个标记是(每行一个)：
```
1. fmt
2. .
3. Println
4. (
5. "Hello, World!"
6. )
```

### 行分隔符

在 Go 程序中，一行代表一个语句结束。每个语句不需要像 C 家族中的其它语言一样以分号 ; 结尾，因为这些工作都将由 Go 编译器自动完成。

如果你打算将多个语句写在同一行，它们则必须使用 ; 人为区分，但在实际开发中我们并不鼓励这种做法。

以下为两个语句：
```go
fmt.Println("Hello, World!")
fmt.Println("菜鸟教程：runoob.com")
```

### 注释

注释不会被编译，每一个包应该有相关注释。

单行注释是最常见的注释形式，你可以在任何地方使用以 // 开头的单行注释。多行注释也叫块注释，均已以 /* 开头，并以 */ 结尾。如：

```
// 单行注释
/*
 Author by 菜鸟教程
 我是多行注释
 */
```

### 标识符

标识符用来命名变量、类型等程序实体。一个标识符实际上就是一个或是多个字母(A~Z和a~z)数字(0~9)、下划线_组成的序列，但是第一个字符必须是字母或下划线而不能是数字。

以下是有效的标识符：
```
mahesh   kumar   abc   move_name   a_123
myname50   _temp   j   a23b9   retVal
```

以下是无效的标识符：
- 1ab（以数字开头）
- case（Go 语言的关键字）
- a+b（运算符是不允许的）

### 字符串连接

Go 语言的字符串连接可以通过 `+` 实现：
```go
package main
import "fmt"
func main() {
    fmt.Println("Google" + "Runoob")
}
```
以上实例输出结果为：
```
GoogleRunoob
```

### 关键字

下面列举了 Go 代码中会使用到的 25 个关键字或保留字：
- break
- case
- chan
- const
- continue
- default
- defer
- else
- fallthrough
- for
- func
- go
- goto
- if
- import
- interface
- map
- package
- range
- return
- select
- struct
- switch
- type
- var

除了以上介绍的这些关键字，Go 语言还有 36 个预定义标识符：

| --- | --- | --- | --- | --- | --- | --- | --- | --- | 
| --- | --- | --- | --- | --- | --- | --- | --- | --- | 
| append | bool | byte | cap | close | complex | complex64 | complex128 | uint16 | 
| copy | false | float32 | float64 | imag | int | int8 | int16 | uint32 | 
| int32 | int64 | iota | len | make | new | nil | panic |uint64 | 
| print | println | real | recover | string | true | uint | uint8 | uintptr |

程序一般由关键字、常量、变量、运算符、类型和函数组成。
程序中可能会使用到这些分隔符：括号 ()，中括号 [] 和大括号 {}。
程序中可能会使用到这些标点符号：`.`、`,`、`;`、`:` 和 `…`。

### Go 语言的空格

在 Go 语言中，空格通常用于分隔标识符、关键字、运算符和表达式，以提高代码的可读性。
Go 语言中变量的声明必须使用空格隔开，如：
```go
var x int
const Pi float64 = 3.14159265358979323846
```

在运算符和操作数之间要使用空格能让程序更易阅读：

```go
// 无空格：
fruit=apples+oranges;

// 在变量与运算符间加入空格，程序看起来更加美观，如：
fruit = apples + oranges; 

// 在关键字和表达式之间要使用空格。
if x > 0 {
    // do something
}

// 在函数调用时，函数名和左边等号之间要使用空格，参数之间也要使用空格。
result := add(2, 3)
```

### 格式化字符串

Go 语言中使用 `fmt.Sprintf` 或 `fmt.Printf` 格式化字符串并赋值给新串：
- Sprintf 根据格式化参数生成格式化的字符串并返回该字符串。
- Printf 根据格式化参数生成格式化的字符串并写入标准输出。

```go
package main

import (
    "fmt"
)

func main() {
   // %d 表示整型数字，%s 表示字符串
    var stockcode=123
    var enddate="2020-12-31"
    var url="Code=%d&endDate=%s"
    var target_url=fmt.Sprintf(url,stockcode,enddate)
    fmt.Println(target_url)
}
```
输出结果：
```
Code=123&endDate=2020-12-31
```

```go
package main

import (
    "fmt"
)

func main() {
   // %d 表示整型数字，%s 表示字符串
    var stockcode=123
    var enddate="2020-12-31"
    var url="Code=%d&endDate=%s"
    fmt.Printf(url,stockcode,enddate)
}
```
输出结果：
```
Code=123&endDate=2020-12-31
```

## Go 语言数据类型

在 Go 编程语言中，数据类型用于声明函数和变量。

数据类型的出现是为了把数据分成所需内存大小不同的数据，编程的时候需要用大数据的时候才需要申请大内存，就可以充分利用内存。

Go 语言按类别有以下几种数据类型：

- 布尔型：布尔型的值只可以是常量 true 或者 false。一个简单的例子：var b bool = true。
- 数字类型：整型 int 和浮点型 float32、float64，Go 语言支持整型和浮点型数字，并且支持复数，其中位的运算采用补码。
- 字符串类型：字符串就是一串固定长度的字符连接起来的字符序列。Go 的字符串是由单个字节连接起来的。Go 语言的字符串的字节使用 UTF-8 编码标识 Unicode 文本。
- 派生类型：
  - (a) 指针类型（Pointer）
  - (b) 数组类型
  - (c) 结构化类型(struct)
  - (d) Channel 类型
  - (e) 函数类型
  - (f) 切片类型
  - (g) 接口类型（interface）
  - (h) Map 类型

### 数字类型

Go 也有基于架构的类型，例如：int、uint 和 uintptr。

- uint8 ： 无符号 8 位整型 (0 到 255)
- uint16 ： 无符号 16 位整型 (0 到 65535)
- uint32 ： 无符号 32 位整型 (0 到 4294967295)
- uint64 ： 无符号 64 位整型 (0 到 18446744073709551615)
- int8 ： 有符号 8 位整型 (-128 到 127)
- int16 ： 有符号 16 位整型 (-32768 到 32767)
- int32 ： 有符号 32 位整型 (-2147483648 到 2147483647)
- int64 ： 有符号 64 位整型 (-9223372036854775808 到 9223372036854775807)

### 浮点型

- float32 ： IEEE-754 32位浮点型数
- float64 ： IEEE-754 64位浮点型数
- complex64 ： 32 位实数和虚数
- complex128 ： 64 位实数和虚数



### 其他数字类型

- byte ： 类似 uint8
- rune ： 类似 int32
- uint ： 32 或 64 位
- int : 与 uint 一样大小
- uintptr : 无符号整型，用于存放一个指针