# Koa 路由模块化

## 文件

- app.js

```js
const Koa = require('koa');
const router = require('koa-router')();
const render = require('koa-art-template');
const path = require('path');
const app = new Koa();
 
render(app, {
    root: path.join(__dirname, 'view'),
    extname: '.html',
    debug: process.env.NODE_ENV !== 'production'
});
 
// 1.引入模块化的子路由
var admin = require('./routes/admin.js');
var api = require('./routes/api.js');
 
// 2.绑定路由
router.use('/admin', admin);
router.use('/api', api);

router.get('/', (ctx) => {
    ctx.body = "这是一个首页"
});
 
app.use(router.routes());
app.use(router.allowedMethods());
app.listen(3000);
```

- routes/admin.js

```js
var router = require('koa-router')();
 
// 3.引入子路由
var user = require('./admin/user.js');
var focus = require('./admin/focus.js');
 
 
// 4.绑定子路由
router.use('/user', user);
router.use('/focus', focus);
 
router.get('/', (ctx) => {
    ctx.body = '这是后台管理系统首页';
});
 
 
module.exports = router.routes();
```

- routes/api.js

```js
var router = require('koa-router')();
 
router.get('/', (ctx) => {
    ctx.body = '用户首页'
});
 
router.get('/add', (ctx) => {
    ctx.body = '用户增加'
});
 
router.get('/edit', (ctx) => {
    ctx.body = '编辑用户'
});
 
router.get('/delete', (ctx) => {
    ctx.body = '删除用户'
});
 
module.exports= router.routes();
```