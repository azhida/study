import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.aaef0e9b.js";const B=JSON.parse('{"title":"基于 VMware Workstation Pro 搭建操作环境","description":"","frontmatter":{},"headers":[],"relativePath":"database/DM8/VMware搭建操作环境.md","lastUpdated":1715217401000}'),o={name:"database/DM8/VMware搭建操作环境.md"},p=l(`<h1 id="基于-vmware-workstation-pro-搭建操作环境" tabindex="-1">基于 VMware Workstation Pro 搭建操作环境 <a class="header-anchor" href="#基于-vmware-workstation-pro-搭建操作环境" aria-label="Permalink to &quot;基于 VMware Workstation Pro 搭建操作环境&quot;">​</a></h1><h2 id="安装-vmware-workstation-pro" tabindex="-1">安装 VMware Workstation Pro <a class="header-anchor" href="#安装-vmware-workstation-pro" aria-label="Permalink to &quot;安装 VMware Workstation Pro&quot;">​</a></h2><p><a href="https://www.vmware.com/" target="_blank" rel="noreferrer">VMware 官网</a></p><p>请自行下载安装 VMware Workstation Pro</p><h2 id="下载银河麒麟镜像" tabindex="-1">下载银河麒麟镜像 <a class="header-anchor" href="#下载银河麒麟镜像" aria-label="Permalink to &quot;下载银河麒麟镜像&quot;">​</a></h2><p>麒麟软件官网：<a href="https://www.kylinos.cn/" target="_blank" rel="noreferrer">https://www.kylinos.cn/</a></p><p>自行下载对应的版本。</p><p>我这里选择：银河麒麟高级服务器操作系统V10/兼容版</p><p>下载太久，先用现有的 <code>Kylin-Server-10-SP2-Release-Build09-20210524-x86_64.iso</code> 来操作。</p><h2 id="创建虚拟机-vm-dm" tabindex="-1">创建虚拟机 vm-dm <a class="header-anchor" href="#创建虚拟机-vm-dm" aria-label="Permalink to &quot;创建虚拟机 vm-dm&quot;">​</a></h2><h3 id="配置宿主机和虚拟机的共享文件夹" tabindex="-1">配置宿主机和虚拟机的共享文件夹 <a class="header-anchor" href="#配置宿主机和虚拟机的共享文件夹" aria-label="Permalink to &quot;配置宿主机和虚拟机的共享文件夹&quot;">​</a></h3><p>安装 <code>vmware tools</code> ，然后鼠标右键将 <code>/run/media/root/VMware Tools/VMwareTools-10.3.23-16594550.tar.gz</code> 加压缩到 <code>/home</code> 目录下，解压后得到文件夹 <code>/home/vmware-tools-distrib</code> 。</p><p>执行安装命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/home/vmware-tools-distrib</span></span>
<span class="line"><span style="color:#FFCB6B;">./vmware-install.pl</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 一路默认即可</span></span>
<span class="line"></span></code></pre></div><h4 id="设置-vm-dm-共享文件夹" tabindex="-1">设置 vm-dm 共享文件夹 <a class="header-anchor" href="#设置-vm-dm-共享文件夹" aria-label="Permalink to &quot;设置 vm-dm 共享文件夹&quot;">​</a></h4><ul><li>选中 vm-dm ，鼠标右键，点击 设置</li><li>点击 选项</li><li>点击 共享文件夹</li><li>点击 总是启用</li><li>点击 添加</li><li>自行选择 共享的文件夹，我的是 <code>D:/vm-share</code> ，名称 <code>vm-share</code> , 然后点击 确认</li></ul><p>此时 vm-dm 虚拟机里面会多了一个文件夹 <code>/mnt/hgfs/vm-share</code> ，共享文件夹配置结束 。</p><h2 id="在宿主机使用-ssh-连接-vm-dm-虚拟机" tabindex="-1">在宿主机使用 ssh 连接 vm-dm 虚拟机 <a class="header-anchor" href="#在宿主机使用-ssh-连接-vm-dm-虚拟机" aria-label="Permalink to &quot;在宿主机使用 ssh 连接 vm-dm 虚拟机&quot;">​</a></h2><p>vm-dm 的网络适配器 选择 <code>NAT 模式</code>。</p><p>vm-dm 虚拟机创建成功并启动后，先在 vm-dm 里面选择一个可用的网络。</p><p>vm-dm 里面查看网络信息。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ifconfig</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ens33: flags=4613&lt;...</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#         inet 192.168.234.130  ...</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#         ...</span></span>
<span class="line"></span></code></pre></div><p>说明 vm-dm 的 ip 地址为 <code>192.168.234.130</code> 。</p><h3 id="做宿主机和虚拟机的网络映射" tabindex="-1">做宿主机和虚拟机的网络映射 <a class="header-anchor" href="#做宿主机和虚拟机的网络映射" aria-label="Permalink to &quot;做宿主机和虚拟机的网络映射&quot;">​</a></h3><ul><li>点击 VMware Workstation Pro 软件菜单栏 <code>编辑</code> 按钮</li><li>点击 虚拟网络编辑器</li><li>弹出框右下角点击 更改设置 (需要具备管理员特权才能修改网络配置。)</li><li>选中类型为 <code>NAT 模式</code> 的网卡，并点击 <code>NAT 设置</code></li><li>在 NAT 设置 弹出框中操作： <ul><li>点击 <code>添加</code></li><li>主机端口：9022</li><li>类型：TCP</li><li>虚拟机IP地址：192.168.234.130</li><li>虚拟机端口：22</li><li>点击确定</li></ul></li><li>点击确定</li><li>点击应用，点击确定</li></ul><p>此时，映射已经做好。</p><h3 id="宿主机-ssh-连接-vm-dm" tabindex="-1">宿主机 ssh 连接 vm-dm <a class="header-anchor" href="#宿主机-ssh-连接-vm-dm" aria-label="Permalink to &quot;宿主机 ssh 连接 vm-dm&quot;">​</a></h3><p>打开 cmd 命令行，执行</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">root@127.0.0.1</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">9022</span></span>
<span class="line"></span></code></pre></div><p>按要求输入 vm-dm 的 root 密码就可以接上了。</p><h2 id="安装-dm8" tabindex="-1">安装 DM8 <a class="header-anchor" href="#安装-dm8" aria-label="Permalink to &quot;安装 DM8&quot;">​</a></h2><h3 id="下载-dm8-安装包" tabindex="-1">下载 DM8 安装包 <a class="header-anchor" href="#下载-dm8-安装包" aria-label="Permalink to &quot;下载 DM8 安装包&quot;">​</a></h3><p><a href="https://eco.dameng.com/download/" target="_blank" rel="noreferrer">https://eco.dameng.com/download/</a></p><p>选择合适的版本。</p><p>这里我先用 <code>dm8_20231109_x86_kylin10_64.iso</code> 来操作。</p><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># root</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/mnt/hgfs/vm-share/dm8_20231109_x86_kylin10_64.iso</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/opt/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">groupadd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dinstall</span></span>
<span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dinstall</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/home/dmdba</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/bin/bash</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dmdba</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dmdba</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 按提示输入密码即可</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 做安装目录</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/dm8</span></span>
<span class="line"><span style="color:#FFCB6B;">ls</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-ld</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/dm8</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dmdba:dinstall</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/dm8</span></span>
<span class="line"><span style="color:#FFCB6B;">ls</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-ld</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/dm8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 挂载 iso 镜像文件</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/mnt/dm</span></span>
<span class="line"><span style="color:#FFCB6B;">mount</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/opt/dm8_20231109_x86_kylin10_64.iso</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/mnt/dm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 解决安装时报错 /tmp 空间不足的问题</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/opt/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dmdba:dinstall</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/opt/tmp</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 或</span></span>
<span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">777</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/opt/tmp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">su</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dmdba</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># dmdba</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 解决安装时报错 /tmp 空间不足的问题</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#BABED8;"> DM_INSTALL_TMPDIR</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/opt/tmp</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/mnt/dm</span></span>
<span class="line"><span style="color:#FFCB6B;">ll</span></span>
<span class="line"><span style="color:#FFCB6B;">./DMInstall.bin</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-i</span></span>
<span class="line"></span></code></pre></div><h3 id="卸载-dm-数据库" tabindex="-1">卸载 DM 数据库 <a class="header-anchor" href="#卸载-dm-数据库" aria-label="Permalink to &quot;卸载 DM 数据库&quot;">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># dmdba</span></span>
<span class="line"><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">/dm8/uninstall.sh</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-i</span></span>
<span class="line"></span></code></pre></div>`,39),e=[p];function t(c,r,i,d,m,y){return a(),n("div",null,e)}const D=s(o,[["render",t]]);export{B as __pageData,D as default};
