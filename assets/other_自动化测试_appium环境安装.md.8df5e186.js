import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.aaef0e9b.js";const d=JSON.parse('{"title":"Appium 环境安装","description":"","frontmatter":{},"headers":[],"relativePath":"other/自动化测试/appium环境安装.md","lastUpdated":1693390837000}'),p={name:"other/自动化测试/appium环境安装.md"},o=l(`<h1 id="appium-环境安装" tabindex="-1">Appium 环境安装 <a class="header-anchor" href="#appium-环境安装" aria-label="Permalink to &quot;Appium 环境安装&quot;">​</a></h1><h2 id="环境安装" tabindex="-1">环境安装 <a class="header-anchor" href="#环境安装" aria-label="Permalink to &quot;环境安装&quot;">​</a></h2><ul><li>安装 Appium-Server</li></ul><p><a href="https://github.com/appium/appium-desktop/releases/download/v1.22.3-4/Appium-Server-GUI-windows-1.22.3-4.exe" target="_blank" rel="noreferrer">https://github.com/appium/appium-desktop/releases/download/v1.22.3-4/Appium-Server-GUI-windows-1.22.3-4.exe</a></p><ul><li>安装 Appium-Inspector</li></ul><p><a href="https://github.com/appium/appium-inspector/releases/download/v2023.8.4/Appium-Inspector-windows-2023.8.4.exe" target="_blank" rel="noreferrer">https://github.com/appium/appium-inspector/releases/download/v2023.8.4/Appium-Inspector-windows-2023.8.4.exe</a></p><ul><li>安装木木模拟器</li></ul><p><a href="https://mumu.163.com/" target="_blank" rel="noreferrer">https://mumu.163.com/</a></p><p><a href="https://adl.netease.com/d/g/mumu/c/gw_mumu12?type=pc&amp;direct=1" target="_blank" rel="noreferrer">https://adl.netease.com/d/g/mumu/c/gw_mumu12?type=pc&amp;direct=1</a></p><h2 id="配置-app-信息" tabindex="-1">配置 APP 信息 <a class="header-anchor" href="#配置-app-信息" aria-label="Permalink to &quot;配置 APP 信息&quot;">​</a></h2><p>输入必要参数，点击连接，以微信为例：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">appium:deviceName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">127.0.0.1:7555</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">appium:appPackage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.douguo.recipe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">appium:appActivity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.douguo.recipe.MainActivity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">platformName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Android</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>添加以下四项值，完后点击“Start Session”。</p><ul><li>platformName---设备平台，Android或IOS</li><li>deviceName----设备名。按上边adb devices -l 查出的设备名modle填写即可</li><li>appPackage----要启动的app的包名，是App开发者提供的名称。微信是&quot;com.tencent.mm&quot;</li><li>appActivity----要启动的界面，是App提供的各种不同的功能。每个程序都有个MainActivity，就是打开程序时显示在屏幕的活动。微信启动界面是&quot;.ui.LauncherUI&quot;</li></ul><p>appPackage和appActivity获取：</p><p>首先在android手机或模拟器上打开App，输入下面的abd命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dumpsys</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">window</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">windows</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">findstr</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">mFocusedApp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 正在运行应用包名</span></span>
<span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dumpsys</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">window</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">findstr</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">mCurrentFocus</span></span>
<span class="line"></span></code></pre></div><blockquote><p>注意：要先在模拟器里打开APP，否则看不到相关信息</p></blockquote><h2 id="python-代码-登录微信的操作" tabindex="-1">python 代码 登录微信的操作 <a class="header-anchor" href="#python-代码-登录微信的操作" aria-label="Permalink to &quot;python 代码 登录微信的操作&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pip</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Appium-Python-Client</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Selenium</span></span>
<span class="line"></span></code></pre></div><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> appium </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> webdriver</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">common</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">by </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> By</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">support</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ui </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> WebDriverWait</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">support </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> expected_conditions </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#BABED8;"> EC</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># appium服务监听地址</span></span>
<span class="line"><span style="color:#BABED8;">server</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:4723/wd/hub</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># app启动参数</span></span>
<span class="line"><span style="color:#BABED8;">desired_caps</span><span style="color:#89DDFF;">={</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">platformName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Android</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deviceName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SM_N976N</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">appPackage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.tencent.mm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">appActivity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.ui.LauncherUI</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">connectTimeout</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">10</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 驱动</span></span>
<span class="line"><span style="color:#BABED8;">driver </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Remote</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">server</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">desired_caps</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">wait </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">WebDriverWait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 点击启动页</span></span>
<span class="line"><span style="color:#BABED8;">qidongye </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> wait</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">until</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">EC</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">presence_of_element_located</span><span style="color:#89DDFF;">((</span><span style="color:#82AAFF;">By</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ID</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">android:id/content</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)))</span></span>
<span class="line"><span style="color:#BABED8;">qidongye</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 获取登录按钮</span></span>
<span class="line"><span style="color:#BABED8;">login_btn </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> wait</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">until</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">EC</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">presence_of_element_located</span><span style="color:#89DDFF;">((</span><span style="color:#82AAFF;">By</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ID</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.tencent.mm:id/j_9</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 点击登录按钮</span></span>
<span class="line"><span style="color:#BABED8;">login_btn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># # 获取手机号文本框</span></span>
<span class="line"><span style="color:#BABED8;">phone_text </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> wait</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">until</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">EC</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">presence_of_element_located</span><span style="color:#89DDFF;">((</span><span style="color:#82AAFF;">By</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ID</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.tencent.mm:id/cd7</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># # 填写手机号文本框</span></span>
<span class="line"><span style="color:#BABED8;">phone_text</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send_keys</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1234</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://blog.csdn.net/m0_58780961/article/details/121377230?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-121377230-blog-129801887.235%5Ev38%5Epc_relevant_anti_t3_base&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=1" target="_blank" rel="noreferrer">python appium+夜神模拟器 配置 笔记整理</a></li><li><a href="https://blog.csdn.net/weixin_58694594/article/details/129801887" target="_blank" rel="noreferrer">python+appium+夜神模拟器搭建app自动化环境</a></li><li><a href="https://blog.51cto.com/u_15354476/5342062" target="_blank" rel="noreferrer">appium连接夜神模拟器操作app</a></li><li><a href="https://www.jianshu.com/p/a80e1d35be10" target="_blank" rel="noreferrer">appium自动化测试</a></li><li><a href="https://blog.csdn.net/weixin_38306507/article/details/126464298" target="_blank" rel="noreferrer">自动化测试之路 —— Appium使用教程</a></li><li><a href="https://www.ngui.cc/el/3058312.html?action=onClick" target="_blank" rel="noreferrer">Appium自动化之adb常用命令及连接mumu模拟器</a></li><li><a href="https://blog.csdn.net/qq_21689457/article/details/129643574" target="_blank" rel="noreferrer">python+Appium实现手机移动端自动化 - 模拟器 或 真机【有线】</a></li></ul><h2 id="问题" tabindex="-1">问题 <a class="header-anchor" href="#问题" aria-label="Permalink to &quot;问题&quot;">​</a></h2><p>解决：python+appium报错ValueError: Timeout value connect was ＜...＞, but it must be an int, float or None.</p><p>最直接的解决方案就是selenium版本降级：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">pip install --force-reinstall -v &quot;selenium==4.8.0&quot;</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre></div><blockquote><p>参考：<a href="https://blog.csdn.net/qq_48302722/article/details/130861992" target="_blank" rel="noreferrer">https://blog.csdn.net/qq_48302722/article/details/130861992</a></p></blockquote>`,28),e=[o];function t(r,c,D,i,y,F){return a(),n("div",null,e)}const B=s(p,[["render",t]]);export{d as __pageData,B as default};
