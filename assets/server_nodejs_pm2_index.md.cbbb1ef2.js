import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.aaef0e9b.js";const C=JSON.parse('{"title":"pm2","description":"","frontmatter":{},"headers":[],"relativePath":"server/nodejs/pm2/index.md","lastUpdated":1712649891000}'),p={name:"server/nodejs/pm2/index.md"},o=l(`<h1 id="pm2" tabindex="-1">pm2 <a class="header-anchor" href="#pm2" aria-label="Permalink to &quot;pm2&quot;">​</a></h1><p><a href="https://pm2.fenxianglu.cn/" target="_blank" rel="noreferrer">pm2 中文网</a></p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">pm2</span></span>
<span class="line"></span></code></pre></div><h2 id="操作应用" tabindex="-1">操作应用 <a class="header-anchor" href="#操作应用" aria-label="Permalink to &quot;操作应用&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">start</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">reload</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">delete</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">reload</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">reload</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">reload</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span></span>
<span class="line"></span></code></pre></div><h2 id="查看应用列表" tabindex="-1">查看应用列表 <a class="header-anchor" href="#查看应用列表" aria-label="Permalink to &quot;查看应用列表&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">list</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ls</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">status</span></span>
<span class="line"></span></code></pre></div><h2 id="查看日志" tabindex="-1">查看日志 <a class="header-anchor" href="#查看日志" aria-label="Permalink to &quot;查看日志&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">logs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 指定日志行数</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--lines</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">200</span></span>
<span class="line"></span></code></pre></div><h2 id="查看监控信息" tabindex="-1">查看监控信息 <a class="header-anchor" href="#查看监控信息" aria-label="Permalink to &quot;查看监控信息&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">monit</span></span>
<span class="line"></span></code></pre></div><h2 id="命令列表" tabindex="-1">命令列表 <a class="header-anchor" href="#命令列表" aria-label="Permalink to &quot;命令列表&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Fork 模式</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">start</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">my-api</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;"># 程序名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Cluster 模式</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">start</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#BABED8;">        </span><span style="color:#676E95;font-style:italic;"># 将根据可用的 CPU 使用 LB 启动最大进程</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">start</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">max</span><span style="color:#BABED8;">      </span><span style="color:#676E95;font-style:italic;"># 和上面一样，但是不推荐使用。</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">scale</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">+3</span><span style="color:#BABED8;">             </span><span style="color:#676E95;font-style:italic;"># Scales \`app\` up by 3 workers</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">scale</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">              </span><span style="color:#676E95;font-style:italic;"># Scales \`app\` up or down to 2 workers total</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Listing</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">list</span><span style="color:#BABED8;">               </span><span style="color:#676E95;font-style:italic;"># 显示所有进程状态</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">jlist</span><span style="color:#BABED8;">              </span><span style="color:#676E95;font-style:italic;"># 以原始JSON格式打印进程列表</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">prettylist</span><span style="color:#BABED8;">         </span><span style="color:#676E95;font-style:italic;"># 以美化的JSON格式打印进程列表</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">describe</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#BABED8;">         </span><span style="color:#676E95;font-style:italic;"># 显示指定进程的所有信息</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">monit</span><span style="color:#BABED8;">              </span><span style="color:#676E95;font-style:italic;"># 监控所有进程</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Logs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#BABED8;"> [--raw]       </span><span style="color:#676E95;font-style:italic;"># 在流中显示所有进程日志</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">flush</span><span style="color:#BABED8;">              </span><span style="color:#676E95;font-style:italic;"># 清空所有日志文件</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">reloadLogs</span><span style="color:#BABED8;">         </span><span style="color:#676E95;font-style:italic;"># 重新加载所有日志</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Actions</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">all</span><span style="color:#BABED8;">           </span><span style="color:#676E95;font-style:italic;"># 停止所有进程</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">all</span><span style="color:#BABED8;">        </span><span style="color:#676E95;font-style:italic;"># 重启所有进程</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">reload</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">all</span><span style="color:#BABED8;">         </span><span style="color:#676E95;font-style:italic;"># 将 0s 宕机机时间重新加载（对于 NETWORKED 应用程序）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#BABED8;">             </span><span style="color:#676E95;font-style:italic;"># 停止指定进程id</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;"># 重启指定进程id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">delete</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#BABED8;">           </span><span style="color:#676E95;font-style:italic;"># 将进程从pm2列表中删除</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">delete</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">all</span><span style="color:#BABED8;">         </span><span style="color:#676E95;font-style:italic;"># 将从pm2列表中删除所有进程</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Misc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">reset</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">proces</span><span style="color:#BABED8;">s</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;"># 重置元数据(重启时间…)</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">updatePM2</span><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;"># 在内存中更新pm2</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ping</span><span style="color:#BABED8;">               </span><span style="color:#676E95;font-style:italic;"># 确保pm2守护进程已经启动</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">sendSignal</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">SIGUSR2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">my-app</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;"># 向脚本发送系统信号</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">start</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--no-daemon</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">start</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--no-vizion</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">start</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">app.js</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--no-autorestart</span></span>
<span class="line"></span></code></pre></div>`,14),e=[o];function t(c,r,y,B,i,E){return a(),n("div",null,e)}const A=s(p,[["render",t]]);export{C as __pageData,A as default};
