import{_ as e,c as a,o as t,a3 as n}from"./chunks/framework.D49FT0pj.js";const u=JSON.parse('{"title":"ClickHouse 使用笔记","description":"","frontmatter":{},"headers":[],"relativePath":"ClickHouse/使用笔记.md","filePath":"ClickHouse/使用笔记.md","lastUpdated":1746585786000}'),i={name:"ClickHouse/使用笔记.md"};function l(p,s,c,o,r,h){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="clickhouse-使用笔记" tabindex="-1">ClickHouse 使用笔记 <a class="header-anchor" href="#clickhouse-使用笔记" aria-label="Permalink to &quot;ClickHouse 使用笔记&quot;">​</a></h1><p><a href="https://clickhouse.com" target="_blank" rel="noreferrer">ClickHouse官网</a></p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><p><a href="https://clickhouse.com/docs/zh/getting-started/install/" target="_blank" rel="noreferrer">官网安装部署教程</a></p><p>参考：<a href="https://blog.csdn.net/daerzei/article/details/113818931" target="_blank" rel="noreferrer">Ubuntu20安装clickhouse最新版本详细教程</a></p><p>参考：<a href="https://www.136.la/nginx/show-27924.html" target="_blank" rel="noreferrer">Ubuntu下ClickHouse安装(示例代码)</a></p><h2 id="注意" tabindex="-1">注意 <a class="header-anchor" href="#注意" aria-label="Permalink to &quot;注意&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 启动 clickhouse-server</span></span>
<span class="line"><span>service clickhouse-server start</span></span></code></pre></div><p>此时如果clickhouse-server启动不了，排查</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 查看错误日志是什么回事，发现9000端口已被占用</span></span>
<span class="line"><span>tail -10 /var/log/clickhouse-server/clickhouse-server.log</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 如果提示权限相关，则 将相关文件和文件夹 所属用户和所属组 改为 clickhouse:clickhouse</span></span>
<span class="line"><span>sudo chown -R clickhouse:clickhouse /var/lib/clickhouse/*</span></span></code></pre></div><p>解决：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>vi /etc/clickhouse-server/config.xml</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 找到&lt;tcp_port&gt;9000&lt;/tcp_port&gt;  把9000改为其他端口如:9001</span></span>
<span class="line"><span># 还有一个问题就是ipv4和ipv6的问题，如果服务器不支持ipv6，那么把listen_host冒号去掉改为自己的IP地址，或0.0.0.0表示所有ip都能接入</span></span></code></pre></div><h3 id="浏览器访问-http-ip-8123-失败的排查解决" tabindex="-1">浏览器访问 <code>http://ip:8123</code> 失败的排查解决 <a class="header-anchor" href="#浏览器访问-http-ip-8123-失败的排查解决" aria-label="Permalink to &quot;浏览器访问 \`http://ip:8123\` 失败的排查解决&quot;">​</a></h3><ul><li>确认 8123 端口已开放</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 开放 8123端口</span></span>
<span class="line"><span>ufw allow 8123</span></span>
<span class="line"><span># 重启防火墙</span></span>
<span class="line"><span>ufw reload</span></span></code></pre></div><ul><li>确认 配置文件 <code>listen_host</code> 已启用</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>vim /etc/clickhouse-server/config.xml</span></span></code></pre></div><p>找到 <code>listen_host</code> ，大概在 line:178<br> 支持 IP6 则 开启 <code>&lt;listen_host&gt;::&lt;/listen_host&gt;</code> ， 不支持 IP6 则 开启 <code>&lt;listen_host&gt;0.0.0.0&lt;/listen_host&gt;</code></p><p>保存后重启 clickhouse-server</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>clickhouse restart</span></span></code></pre></div><p>再次访问 <code>http://ip:8123</code> 就看到 输出 <code>ok.</code> 了</p>`,22)]))}const g=e(i,[["render",l]]);export{u as __pageData,g as default};
