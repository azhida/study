# 操作数据库实例

## 创建数据库

### dminit 命令行创建数据库实例

dminit 是 DM 初始化数据库的命令行工具，位于 DM 安装目录 bin 下。

```sh
# dmdba
cd /dm8/bin
./dminit help
./dminit path=/dm8/data db_name=DMTEST instance_NAME=DMTESTSVR sysdba_pwd=Dameng123 port_num=5238 PAGE_SIZE=16
```

dminit 方式创建数据库不会自动注册数据库服务（DM 数据库配置助手方式默认自动注册数
据库服务），所以不能以服务方式启动数据库，如果要以服务方式启动，则需要注册数据库
服务。

### root 执行注册服务脚本

```sh
# root
# cd $DM_HOME/script/root
cd /dm8/script/root
./dm_service_installer.sh -t dmserver -p DMTESTSVR -dm_ini /dm8/data/DMTEST/dm.ini
```


### root 执行删除服务脚本

```sh
# root
# cd $DM_HOME/script/root
cd /dm8/script/root
./dm_service_uninstaller.sh -h
./dm_service_uninstaller.sh -n DmServiceDMTESTSVR
/dm8/script/root/dm_service_uninstaller.sh -n DmServiceDMTESTSVR
```


## 连接数据库

如果使用客户端工具连接远端数据库服务器，需要开放数据库服务器防火墙对应端口（开放
端口后需 reload）：

```sh
# root
firewall-cmd --add-port=5236/tcp --permanent --zone=public
firewall-cmd --reload
firewall-cmd --list-ports

# 或者直接关闭数据库服务器的防火墙
systemctl status firewalld
systemctl stop firewalld
```

### disql 命令行方式连接数据库

```sh
# dmdba
cd /dm8/bin
./disql sysdba/Dameng123:5238
# sysdba 用户名
# Dameng123 密码
# 5236 端口
```

```sql
select name from V$database;
select instance_name from v$instance;
# 退出
exit
```