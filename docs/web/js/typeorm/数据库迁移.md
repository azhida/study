# 数据库迁移


## 创建迁移文件

```sh
typeorm migration:create src/migration/create-test-table
# Migration D:\web-www\RuoYi-NodeJS\src\migration/1696836975501-create-test-table.ts has been generated successfully.
```

/src/migration/1696836975501-create-test-table.ts

```ts
import { MigrationInterface, QueryRunner, Table } from "typeorm"

export class CreateTest1Table1696837012074 implements MigrationInterface {

  public async up(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.createTable(
      new Table({
        name: "test",
        columns: [
          {
            name: "id",
            type: "int",
            isPrimary: true
          },
          {
            name: "name",
            type: "varchar"
          }
        ]
      }),
      true
    );
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
  }

}
```

## 执行迁移文件

```sh
pnpm run typeorm migration:run -d .\src\data-source.ts
```

