# 千峰PHP千万级秒杀项目实战教程(7集)

## 1、课程简介
### 注意点
- 脱离原站点部署（不能影响原来正常运行的站点）
- 预测，测试，监控
    - 预测：人员分布，流量分布等等
    - 测试：测压，测流程测流逻辑等
    - 监控：实时监控各项数据性能，外部流量入侵等不可预知的事件

### 关键点
- 高可用：双活
  - 阿里云不支持双活
- 高并发：负载均衡，数据过滤
    - 负载均衡：阿里云有提供
    - 数据过滤：减少数据发送传输，只传输必要的数据，做到极简

### 设计思路
- 静态页面：cdn，网址隐藏，页面压缩，缓存机制
  - 页面压缩：合适压缩度，不能过分
- 动态页面：排队，异步，资质抢购


## 2、设计思路

### 设计分析
- 用户：量大，坏人
- 地域：全国/地区
- 业务流程：前台、后台

### 设计分层
- 第一层：商品展示层
  - 秒杀是否开始，未开始则进入秒杀倒计时页面，
  - 秒杀已开启，则判断商品是否已售罄，售罄则进入秒杀完成页面【秒杀结束】
  - 商品未售罄，则带有秒杀按钮跳转页面，进入第二层
- 第二层：用户登记层
  - 检测当前用户是否已提交过数据，已提交则提示当前用户秒杀结束【秒杀结束】
  - 向后台提交数据进行校验，校验不通过则向页面反馈数据不合格
  - 校验通过，进入第三层
- 第三层：数据接入层
  - 先将数据存入 nosql 缓存中，缓存失败，则向页面返回数据异常
  - 缓存成功，判断 是否达到商品销售最大值，即库存是否足够，
  - 无库存，则返回商品售罄
  - 有库存，进入第四层
- 第四层：数据处理层
  - 将 nosql 中的数据持久化存入数据库中，改变用户状态，改变库存， 
  - 完成秒杀，异步通知用户【如果页面还打开着】
  
## 3、第一层代码分析

- 秒杀第一层
  - 用户宣传落地页
    - 知识点
    - 特点
    - 构想
    - 具体实施

## 4、第二、三、四层代码分析

## 5、第一层代码实现讲解

