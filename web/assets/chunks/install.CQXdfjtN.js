import{cd as z,cK as it,y as Ye,at as Tt,av as Dt,bZ as nt,cA as ot,dW as Be,b as er,U as tr,R as rr,e6 as ar,e7 as ir,n as Ce,c8 as nr,j as At,bJ as or,bj as be,ah as Z,p as U,e as P,P as Ze,t as sr,_ as te,c9 as Lt,N as Y,cc as lr,ap as ur,bA as Se,z as ze,C as Xe,au as hr,aw as vr,az as cr,ax as It,ay as fr,bQ as gr,bu as dr,bv as pr,aC as ee,bc as ae,bd as yr,e8 as mr,bk as br,am as Sr,bn as xr,dI as Pt,aT as ke,dL as he,by as wr,aI as Mt,dl as j,e9 as kt,K as X,dm as st,k as xe,ea as _r,eb as Cr,e0 as Le,ec as Ot,A as Rt,ai as Gt,cv as Tr,ed as Dr,cg as Ar,ch as lt,ee as Lr,o as J,ef as Ir,bm as Pr,aE as ut,eg as Mr,a_ as kr,eh as Or,ei as Ne,ej as ht,ek as vt,aa as Ee,I as Rr,el as Gr,em as Br,en as zr,aN as Bt,eo as Nr,ep as Hr,aG as me,aq as Ie,d2 as Vr,al as ct,aF as Wr,eq as Fr,b3 as zt,g as Yr,h as Xr,an as Nt,bK as Er,bL as Ur,dx as ft,bB as jr,b8 as qr,b7 as $r,ao as Zr,d7 as Kr,cG as Qr,d9 as Jr,dk as ea}from"./install.yZhh2bWT.js";import{g as Te}from"./sectorHelper.inSQkMzc.js";var de=Math.PI*2,ne=rr.CMD,ta=["top","right","bottom","left"];function ra(a,r,t,e,i){var n=t.width,o=t.height;switch(a){case"top":e.set(t.x+n/2,t.y-r),i.set(0,-1);break;case"bottom":e.set(t.x+n/2,t.y+o+r),i.set(0,1);break;case"left":e.set(t.x-r,t.y+o/2),i.set(-1,0);break;case"right":e.set(t.x+n+r,t.y+o/2),i.set(1,0);break}}function aa(a,r,t,e,i,n,o,h,l){o-=a,h-=r;var u=Math.sqrt(o*o+h*h);o/=u,h/=u;var s=o*t+a,g=h*t+r;if(Math.abs(e-i)%de<1e-4)return l[0]=s,l[1]=g,u-t;if(n){var c=e;e=Ce(i),i=Ce(c)}else e=Ce(e),i=Ce(i);e>i&&(i+=de);var v=Math.atan2(h,o);if(v<0&&(v+=de),v>=e&&v<=i||v+de>=e&&v+de<=i)return l[0]=s,l[1]=g,u-t;var f=t*Math.cos(e)+a,d=t*Math.sin(e)+r,p=t*Math.cos(i)+a,y=t*Math.sin(i)+r,b=(f-o)*(f-o)+(d-h)*(d-h),m=(p-o)*(p-o)+(y-h)*(y-h);return b<m?(l[0]=f,l[1]=d,Math.sqrt(b)):(l[0]=p,l[1]=y,Math.sqrt(m))}function Pe(a,r,t,e,i,n,o,h){var l=i-a,u=n-r,s=t-a,g=e-r,c=Math.sqrt(s*s+g*g);s/=c,g/=c;var v=l*s+u*g,f=v/c;h&&(f=Math.min(Math.max(f,0),1)),f*=c;var d=o[0]=a+f*s,p=o[1]=r+f*g;return Math.sqrt((d-i)*(d-i)+(p-n)*(p-n))}function Ht(a,r,t,e,i,n,o){t<0&&(a=a+t,t=-t),e<0&&(r=r+e,e=-e);var h=a+t,l=r+e,u=o[0]=Math.min(Math.max(i,a),h),s=o[1]=Math.min(Math.max(n,r),l);return Math.sqrt((u-i)*(u-i)+(s-n)*(s-n))}var E=[];function ia(a,r,t){var e=Ht(r.x,r.y,r.width,r.height,a.x,a.y,E);return t.set(E[0],E[1]),e}function na(a,r,t){for(var e=0,i=0,n=0,o=0,h,l,u=1/0,s=r.data,g=a.x,c=a.y,v=0;v<s.length;){var f=s[v++];v===1&&(e=s[v],i=s[v+1],n=e,o=i);var d=u;switch(f){case ne.M:n=s[v++],o=s[v++],e=n,i=o;break;case ne.L:d=Pe(e,i,s[v],s[v+1],g,c,E,!0),e=s[v++],i=s[v++];break;case ne.C:d=ir(e,i,s[v++],s[v++],s[v++],s[v++],s[v],s[v+1],g,c,E),e=s[v++],i=s[v++];break;case ne.Q:d=ar(e,i,s[v++],s[v++],s[v],s[v+1],g,c,E),e=s[v++],i=s[v++];break;case ne.A:var p=s[v++],y=s[v++],b=s[v++],m=s[v++],w=s[v++],S=s[v++];v+=1;var _=!!(1-s[v++]);h=Math.cos(w)*b+p,l=Math.sin(w)*m+y,v<=1&&(n=h,o=l);var C=(g-p)*m/b+p;d=aa(p,y,m,w,w+S,_,C,c,E),e=Math.cos(w+S)*b+p,i=Math.sin(w+S)*m+y;break;case ne.R:n=e=s[v++],o=i=s[v++];var x=s[v++],T=s[v++];d=Ht(n,o,x,T,g,c,E);break;case ne.Z:d=Pe(e,i,n,o,g,c,E,!0),e=n,i=o;break}d<u&&(u=d,t.set(E[0],E[1]))}return u}var q=new z,D=new z,O=new z,K=new z,$=new z;function Qa(a,r){if(a){var t=a.getTextGuideLine(),e=a.getTextContent();if(e&&t){var i=a.textGuideLineConfig||{},n=[[0,0],[0,0],[0,0]],o=i.candidates||ta,h=e.getBoundingRect().clone();h.applyTransform(e.getComputedTransform());var l=1/0,u=i.anchor,s=a.getComputedTransform(),g=s&&er([],s),c=r.get("length2")||0;u&&O.copy(u);for(var v=0;v<o.length;v++){var f=o[v];ra(f,0,h,q,K),z.scaleAndAdd(D,q,K,c),D.transform(g);var d=a.getBoundingRect(),p=u?u.distance(D):a instanceof tr?na(D,a.path,O):ia(D,d,O);p<l&&(l=p,D.transform(s),O.transform(s),O.toArray(n[0]),D.toArray(n[1]),q.toArray(n[2]))}Vt(n,r.get("minTurnAngle")),t.setShape({points:n})}}}var Me=[],H=new z;function Vt(a,r){if(r<=180&&r>0){r=r/180*Math.PI,q.fromArray(a[0]),D.fromArray(a[1]),O.fromArray(a[2]),z.sub(K,q,D),z.sub($,O,D);var t=K.len(),e=$.len();if(!(t<.001||e<.001)){K.scale(1/t),$.scale(1/e);var i=K.dot($),n=Math.cos(r);if(n<i){var o=Pe(D.x,D.y,O.x,O.y,q.x,q.y,Me,!1);H.fromArray(Me),H.scaleAndAdd($,o/Math.tan(Math.PI-r));var h=O.x!==D.x?(H.x-D.x)/(O.x-D.x):(H.y-D.y)/(O.y-D.y);if(isNaN(h))return;h<0?z.copy(H,D):h>1&&z.copy(H,O),H.toArray(a[1])}}}}function oa(a,r,t){if(t<=180&&t>0){t=t/180*Math.PI,q.fromArray(a[0]),D.fromArray(a[1]),O.fromArray(a[2]),z.sub(K,D,q),z.sub($,O,D);var e=K.len(),i=$.len();if(!(e<.001||i<.001)){K.scale(1/e),$.scale(1/i);var n=K.dot(r),o=Math.cos(t);if(n<o){var h=Pe(D.x,D.y,O.x,O.y,q.x,q.y,Me,!1);H.fromArray(Me);var l=Math.PI/2,u=Math.acos($.dot(r)),s=l+u-t;if(s>=l)z.copy(H,O);else{H.scaleAndAdd($,h/Math.tan(Math.PI/2-s));var g=O.x!==D.x?(H.x-D.x)/(O.x-D.x):(H.y-D.y)/(O.y-D.y);if(isNaN(g))return;g<0?z.copy(H,D):g>1&&z.copy(H,O)}H.toArray(a[1])}}}}function He(a,r,t,e){var i=t==="normal",n=i?a:a.ensureState(t);n.ignore=r;var o=e.get("smooth");o&&o===!0&&(o=.3),n.shape=n.shape||{},o>0&&(n.shape.smooth=o);var h=e.getModel("lineStyle").getLineStyle();i?a.useStyle(h):n.style=h}function sa(a,r){var t=r.smooth,e=r.points;if(e)if(a.moveTo(e[0][0],e[0][1]),t>0&&e.length>=3){var i=ot(e[0],e[1]),n=ot(e[1],e[2]);if(!i||!n){a.lineTo(e[1][0],e[1][1]),a.lineTo(e[2][0],e[2][1]);return}var o=Math.min(i,n)*t,h=Be([],e[1],e[0],o/i),l=Be([],e[1],e[2],o/n),u=Be([],h,l,.5);a.bezierCurveTo(h[0],h[1],h[0],h[1],u[0],u[1]),a.bezierCurveTo(l[0],l[1],l[0],l[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)a.lineTo(e[s][0],e[s][1])}function la(a,r,t){var e=a.getTextGuideLine(),i=a.getTextContent();if(!i){e&&a.removeTextGuideLine();return}for(var n=r.normal,o=n.get("show"),h=i.ignore,l=0;l<it.length;l++){var u=it[l],s=r[u],g=u==="normal";if(s){var c=s.get("show"),v=g?h:Ye(i.states[u]&&i.states[u].ignore,h);if(v||!Ye(c,o)){var f=g?e:e&&e.states[u];f&&(f.ignore=!0),e&&He(e,!0,u,s);continue}e||(e=new Tt,a.setTextGuideLine(e),!g&&(h||!o)&&He(e,!0,"normal",r.normal),a.stateProxy&&(e.stateProxy=a.stateProxy)),He(e,!1,u,s)}}if(e){Dt(e.style,t),e.style.fill=null;var d=n.get("showAbove"),p=a.textGuideLineConfig=a.textGuideLineConfig||{};p.showAbove=d||!1,e.buildPath=sa}}function ua(a,r){r=r||"labelLine";for(var t={normal:a.getModel(r)},e=0;e<nt.length;e++){var i=nt[e];t[i]=a.getModel([i,r])}return t}var gt=Math.PI*2,De=Math.PI/180;function Wt(a,r){return be(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Ft(a,r){var t=Wt(a,r),e=a.get("center"),i=a.get("radius");Z(i)||(i=[0,i]);var n=U(t.width,r.getWidth()),o=U(t.height,r.getHeight()),h=Math.min(n,o),l=U(i[0],h/2),u=U(i[1],h/2),s,g,c=a.coordinateSystem;if(c){var v=c.dataToPoint(e);s=v[0]||0,g=v[1]||0}else Z(e)||(e=[e,e]),s=U(e[0],n)+t.x,g=U(e[1],o)+t.y;return{cx:s,cy:g,r0:l,r:u}}function ha(a,r,t){r.eachSeriesByType(a,function(e){var i=e.getData(),n=i.mapDimension("value"),o=Wt(e,t),h=Ft(e,t),l=h.cx,u=h.cy,s=h.r,g=h.r0,c=-e.get("startAngle")*De,v=e.get("endAngle"),f=e.get("padAngle")*De;v=v==="auto"?c-gt:-v*De;var d=e.get("minAngle")*De,p=d+f,y=0;i.each(n,function(F){!isNaN(F)&&y++});var b=i.getSum(n),m=Math.PI/(b||y)*2,w=e.get("clockwise"),S=e.get("roseType"),_=e.get("stillShowZeroSum"),C=i.getDataExtent(n);C[0]=0;var x=w?1:-1,T=[c,v],A=x*f/2;nr(T,!w),c=T[0],v=T[1];var L=Yt(e);L.startAngle=c,L.endAngle=v,L.clockwise=w;var M=Math.abs(v-c),I=M,V=0,G=c;if(i.setLayout({viewRect:o,r:s}),i.each(n,function(F,W){var k;if(isNaN(F)){i.setItemLayout(W,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:w,cx:l,cy:u,r0:g,r:S?NaN:s});return}S!=="area"?k=b===0&&_?m:F*m:k=M/y,k<p?(k=p,I-=p):V+=F;var N=G+x*k,B=0,R=0;f>k?(B=G+x*k/2,R=B):(B=G+A,R=N-A),i.setItemLayout(W,{angle:k,startAngle:B,endAngle:R,clockwise:w,cx:l,cy:u,r0:g,r:S?or(F,C,[g,s]):s}),G=N}),I<gt&&y)if(I<=.001){var Q=M/y;i.each(n,function(F,W){if(!isNaN(F)){var k=i.getItemLayout(W);k.angle=Q;var N=0,B=0;Q<f?(N=c+x*(W+1/2)*Q,B=N):(N=c+x*W*Q+A,B=c+x*(W+1)*Q-A),k.startAngle=N,k.endAngle=B}})}else m=I/V,G=c,i.each(n,function(F,W){if(!isNaN(F)){var k=i.getItemLayout(W),N=k.angle===p?p:F*m,B=0,R=0;N<f?(B=G+x*N/2,R=B):(B=G+A,R=G+x*N-A),k.startAngle=B,k.endAngle=R,G+=x*N}})})}var Yt=At();function va(a){return{seriesType:a,reset:function(r,t){var e=t.findComponents({mainType:"legend"});if(!(!e||!e.length)){var i=r.getData();i.filterSelf(function(n){for(var o=i.getName(n),h=0;h<e.length;h++)if(!e[h].isSelected(o))return!1;return!0})}}}}var ca=Math.PI/180;function dt(a,r,t,e,i,n,o,h,l,u){if(a.length<2)return;function s(d){for(var p=d.rB,y=p*p,b=0;b<d.list.length;b++){var m=d.list[b],w=Math.abs(m.label.y-t),S=e+m.len,_=S*S,C=Math.sqrt((1-Math.abs(w*w/y))*_),x=r+(C+m.len2)*i,T=x-m.label.x,A=m.targetTextWidth-T*i;Xt(m,A,!0),m.label.x=x}}function g(d){for(var p={list:[],maxY:0},y={list:[],maxY:0},b=0;b<d.length;b++)if(d[b].labelAlignTo==="none"){var m=d[b],w=m.label.y>t?y:p,S=Math.abs(m.label.y-t);if(S>=w.maxY){var _=m.label.x-r-m.len2*i,C=e+m.len,x=Math.abs(_)<C?Math.sqrt(S*S/(1-_*_/C/C)):C;w.rB=x,w.maxY=S}w.list.push(m)}s(p),s(y)}for(var c=a.length,v=0;v<c;v++)if(a[v].position==="outer"&&a[v].labelAlignTo==="labelLine"){var f=a[v].label.x-u;a[v].linePoints[1][0]+=f,a[v].label.x=u}sr(a,l,l+o)&&g(a)}function fa(a,r,t,e,i,n,o,h){for(var l=[],u=[],s=Number.MAX_VALUE,g=-Number.MAX_VALUE,c=0;c<a.length;c++){var v=a[c].label;Ve(a[c])||(v.x<r?(s=Math.min(s,v.x),l.push(a[c])):(g=Math.max(g,v.x),u.push(a[c])))}for(var c=0;c<a.length;c++){var f=a[c];if(!Ve(f)&&f.linePoints){if(f.labelStyleWidth!=null)continue;var v=f.label,d=f.linePoints,p=void 0;f.labelAlignTo==="edge"?v.x<r?p=d[2][0]-f.labelDistance-o-f.edgeDistance:p=o+i-f.edgeDistance-d[2][0]-f.labelDistance:f.labelAlignTo==="labelLine"?v.x<r?p=s-o-f.bleedMargin:p=o+i-g-f.bleedMargin:v.x<r?p=v.x-o-f.bleedMargin:p=o+i-v.x-f.bleedMargin,f.targetTextWidth=p,Xt(f,p)}}dt(u,r,t,e,1,i,n,o,h,g),dt(l,r,t,e,-1,i,n,o,h,s);for(var c=0;c<a.length;c++){var f=a[c];if(!Ve(f)&&f.linePoints){var v=f.label,d=f.linePoints,y=f.labelAlignTo==="edge",b=v.style.padding,m=b?b[1]+b[3]:0,w=v.style.backgroundColor?0:m,S=f.rect.width+w,_=d[1][0]-d[2][0];y?v.x<r?d[2][0]=o+f.edgeDistance+S+f.labelDistance:d[2][0]=o+i-f.edgeDistance-S-f.labelDistance:(v.x<r?d[2][0]=v.x+f.labelDistance:d[2][0]=v.x-f.labelDistance,d[1][0]=d[2][0]+_),d[1][1]=d[2][1]=v.y}}}function Xt(a,r,t){if(t===void 0&&(t=!1),a.labelStyleWidth==null){var e=a.label,i=e.style,n=a.rect,o=i.backgroundColor,h=i.padding,l=h?h[1]+h[3]:0,u=i.overflow,s=n.width+(o?0:l);if(r<s||t){var g=n.height;if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",r-l);var c=e.getBoundingRect();e.setStyle("width",Math.ceil(c.width)),e.setStyle("backgroundColor",o)}else{var v=r-l,f=r<s?v:t?v>a.unconstrainedWidth?null:v:null;e.setStyle("width",f)}var d=e.getBoundingRect();n.width=d.width;var p=(e.style.margin||0)+2.1;n.height=d.height+p,n.y-=(n.height-g)/2}}}function Ve(a){return a.position==="center"}function ga(a){var r=a.getData(),t=[],e,i,n=!1,o=(a.get("minShowLabelAngle")||0)*ca,h=r.getLayout("viewRect"),l=r.getLayout("r"),u=h.width,s=h.x,g=h.y,c=h.height;function v(_){_.ignore=!0}function f(_){if(!_.ignore)return!0;for(var C in _.states)if(_.states[C].ignore===!1)return!0;return!1}r.each(function(_){var C=r.getItemGraphicEl(_),x=C.shape,T=C.getTextContent(),A=C.getTextGuideLine(),L=r.getItemModel(_),M=L.getModel("label"),I=M.get("position")||L.get(["emphasis","label","position"]),V=M.get("distanceToLabelLine"),G=M.get("alignTo"),Q=U(M.get("edgeDistance"),u),F=M.get("bleedMargin"),W=L.getModel("labelLine"),k=W.get("length");k=U(k,u);var N=W.get("length2");if(N=U(N,u),Math.abs(x.endAngle-x.startAngle)<o){P(T.states,v),T.ignore=!0,A&&(P(A.states,v),A.ignore=!0);return}if(f(T)){var B=(x.startAngle+x.endAngle)/2,R=Math.cos(B),ie=Math.sin(B),ve,we,Qe,_e;e=x.cx,i=x.cy;var oe=I==="inside"||I==="inner";if(I==="center")ve=x.cx,we=x.cy,_e="center";else{var Oe=(oe?(x.r+x.r0)/2*R:x.r*R)+e,Re=(oe?(x.r+x.r0)/2*ie:x.r*ie)+i;if(ve=Oe+R*3,we=Re+ie*3,!oe){var Je=Oe+R*(k+l-x.r),et=Re+ie*(k+l-x.r),tt=Je+(R<0?-1:1)*N,rt=et;G==="edge"?ve=R<0?s+Q:s+u-Q:ve=tt+(R<0?-V:V),we=rt,Qe=[[Oe,Re],[Je,et],[tt,rt]]}_e=oe?"center":G==="edge"?R>0?"right":"left":R>0?"left":"right"}var ce=Math.PI,se=0,fe=M.get("rotate");if(Ze(fe))se=fe*(ce/180);else if(I==="center")se=0;else if(fe==="radial"||fe===!0){var Qt=R<0?-B+ce:-B;se=Qt}else if(fe==="tangential"&&I!=="outside"&&I!=="outer"){var le=Math.atan2(R,ie);le<0&&(le=ce*2+le);var Jt=ie>0;Jt&&(le=ce+le),se=le-ce}if(n=!!se,T.x=ve,T.y=we,T.rotation=se,T.setStyle({verticalAlign:"middle"}),oe){T.setStyle({align:_e});var Ge=T.states.select;Ge&&(Ge.x+=T.x,Ge.y+=T.y)}else{var ge=T.getBoundingRect().clone();ge.applyTransform(T.getComputedTransform());var at=(T.style.margin||0)+2.1;ge.y-=at/2,ge.height+=at,t.push({label:T,labelLine:A,position:I,len:k,len2:N,minTurnAngle:W.get("minTurnAngle"),maxSurfaceAngle:W.get("maxSurfaceAngle"),surfaceNormal:new z(R,ie),linePoints:Qe,textAlign:_e,labelDistance:V,labelAlignTo:G,edgeDistance:Q,bleedMargin:F,rect:ge,unconstrainedWidth:ge.width,labelStyleWidth:T.style.width})}C.setTextConfig({inside:oe})}}),!n&&a.get("avoidLabelOverlap")&&fa(t,e,i,l,u,c,s,g);for(var d=0;d<t.length;d++){var p=t[d],y=p.label,b=p.labelLine,m=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:p.textAlign}),m&&(P(y.states,v),y.ignore=!0);var w=y.states.select;w&&(w.x+=y.x,w.y+=y.y)}if(b){var S=p.linePoints;m||!S?(P(b.states,v),b.ignore=!0):(Vt(S,p.minTurnAngle),oa(S,p.surfaceNormal,p.maxSurfaceAngle),b.setShape({points:S}),y.__hostTarget.textGuideLineConfig={anchor:new z(S[0][0],S[0][1])})}}}var da=function(a){te(r,a);function r(t,e,i){var n=a.call(this)||this;n.z2=2;var o=new Se;return n.setTextContent(o),n.updateData(t,e,i,!0),n}return r.prototype.updateData=function(t,e,i,n){var o=this,h=t.hostModel,l=t.getItemModel(e),u=l.getModel("emphasis"),s=t.getItemLayout(e),g=Y(Te(l.getModel("itemStyle"),s,!0),s);if(isNaN(g.startAngle)){o.setShape(g);return}if(n){o.setShape(g);var c=h.getShallow("animationType");h.ecModel.ssr?(ze(o,{scaleX:0,scaleY:0},h,{dataIndex:e,isFrom:!0}),o.originX=g.cx,o.originY=g.cy):c==="scale"?(o.shape.r=s.r0,ze(o,{shape:{r:s.r}},h,e)):i!=null?(o.setShape({startAngle:i,endAngle:i}),ze(o,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},h,e)):(o.shape.endAngle=s.startAngle,Xe(o,{shape:{endAngle:s.endAngle}},h,e))}else hr(o),Xe(o,{shape:g},h,e);o.useStyle(t.getItemVisual(e,"style")),vr(o,l);var v=(s.startAngle+s.endAngle)/2,f=h.get("selectedOffset"),d=Math.cos(v)*f,p=Math.sin(v)*f,y=l.getShallow("cursor");y&&o.attr("cursor",y),this._updateLabel(h,t,e),o.ensureState("emphasis").shape=Y({r:s.r+(u.get("scale")&&u.get("scaleSize")||0)},Te(u.getModel("itemStyle"),s)),Y(o.ensureState("select"),{x:d,y:p,shape:Te(l.getModel(["select","itemStyle"]),s)}),Y(o.ensureState("blur"),{shape:Te(l.getModel(["blur","itemStyle"]),s)});var b=o.getTextGuideLine(),m=o.getTextContent();b&&Y(b.ensureState("select"),{x:d,y:p}),Y(m.ensureState("select"),{x:d,y:p}),cr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},r.prototype._updateLabel=function(t,e,i){var n=this,o=e.getItemModel(i),h=o.getModel("labelLine"),l=e.getItemVisual(i,"style"),u=l&&l.fill,s=l&&l.opacity;It(n,fr(o),{labelFetcher:e.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:s,defaultText:t.getFormattedLabel(i,"normal")||e.getName(i)});var g=n.getTextContent();n.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var c=t.get(["label","position"]);if(c!=="outside"&&c!=="outer")n.removeTextGuideLine();else{var v=this.getTextGuideLine();v||(v=new Tt,this.setTextGuideLine(v)),la(this,ua(o),{stroke:u,opacity:gr(h.get(["lineStyle","opacity"]),s,1)})}},r}(Lt),pa=function(a){te(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return r.prototype.render=function(t,e,i,n){var o=t.getData(),h=this._data,l=this.group,u;if(!h&&o.count()>0){for(var s=o.getItemLayout(0),g=1;isNaN(s&&s.startAngle)&&g<o.count();++g)s=o.getItemLayout(g);s&&(u=s.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var c=Yt(t),v=new Lt({shape:Y(Ft(t,i),c)});v.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=v,l.add(v)}o.diff(h).add(function(f){var d=new da(o,f,u);o.setItemGraphicEl(f,d),l.add(d)}).update(function(f,d){var p=h.getItemGraphicEl(d);p.updateData(o,f,u),p.off("click"),l.add(p),o.setItemGraphicEl(f,p)}).remove(function(f){var d=h.getItemGraphicEl(f);lr(d,t,f)}).execute(),ga(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},r.prototype.dispose=function(){},r.prototype.containPoint=function(t,e){var i=e.getData(),n=i.getItemLayout(0);if(n){var o=t[0]-n.cx,h=t[1]-n.cy,l=Math.sqrt(o*o+h*h);return l<=n.r&&l>=n.r0}},r.type="pie",r}(ur);function ya(a,r,t){r=Z(r)&&{coordDimensions:r}||Y({encodeDefine:a.getEncode()},r);var e=a.getSource(),i=dr(e,r).dimensions,n=new pr(i,a);return n.initData(e,t),n}var ma=function(){function a(r,t){this._getDataWithEncodedVisual=r,this._getRawData=t}return a.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},a.prototype.containName=function(r){var t=this._getRawData();return t.indexOfName(r)>=0},a.prototype.indexOfName=function(r){var t=this._getDataWithEncodedVisual();return t.indexOfName(r)},a.prototype.getItemVisual=function(r,t){var e=this._getDataWithEncodedVisual();return e.getItemVisual(r,t)},a}(),ba=At(),Sa=function(a){te(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new ma(ee(this.getData,this),ee(this.getRawData,this)),this._defaultLabelLine(t)},r.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return ya(this,{coordDimensions:["value"],encodeDefaulter:ae(yr,this)})},r.prototype.getDataParams=function(t){var e=this.getData(),i=ba(e),n=i.seats;if(!n){var o=[];e.each(e.mapDimension("value"),function(l){o.push(l)}),n=i.seats=mr(o,e.hostModel.get("percentPrecision"))}var h=a.prototype.getDataParams.call(this,t);return h.percent=n[t]||0,h.$vars.push("percent"),h},r.prototype._defaultLabelLine=function(t){br(t,"labelLine",["show"]);var e=t.labelLine,i=t.emphasis.labelLine;e.show=e.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(Sr);function xa(a){return{seriesType:a,reset:function(r,t){var e=r.getData();e.filterSelf(function(i){var n=e.mapDimension("value"),o=e.get(n,i);return!(Ze(o)&&!isNaN(o)&&o<0)})}}}function Ja(a){a.registerChartView(pa),a.registerSeriesModel(Sa),xr("pie",a.registerAction),a.registerLayout(ae(ha,"pie")),a.registerProcessor(va("pie")),a.registerProcessor(xa("pie"))}function ei(a,r,t){var e=r.getBoxLayoutParams(),i=r.get("padding"),n={width:t.getWidth(),height:t.getHeight()},o=be(e,n,i);he(r.get("orient"),a,r.get("itemGap"),o.width,o.height),wr(a,e,n,i)}function wa(a,r){var t=Pt(r.get("padding")),e=r.getItemStyle(["color","opacity"]);return e.fill=r.get("backgroundColor"),a=new ke({shape:{x:a.x-t[3],y:a.y-t[0],width:a.width+t[1]+t[3],height:a.height+t[0]+t[2],r:r.get("borderRadius")},style:e,silent:!0,z2:-1}),a}var _a=function(a){te(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}(Mt);function Et(a){var r=a.get("confine");return r!=null?!!r:a.get("renderMode")==="richText"}function Ut(a){if(j.domSupported){for(var r=document.documentElement.style,t=0,e=a.length;t<e;t++)if(a[t]in r)return a[t]}}var jt=Ut(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ca=Ut(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function qt(a,r){if(!a)return r;r=kt(r,!0);var t=a.indexOf(r);return a=t===-1?r:"-"+a.slice(0,t)+"-"+r,a.toLowerCase()}function Ta(a,r){var t=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return t?t[r]:null}var Da=qt(Ca,"transition"),Ke=qt(jt,"transform"),Aa="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(j.transform3dSupported?"will-change:transform;":"");function La(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function Ia(a,r,t){if(!X(t)||t==="inside")return"";var e=a.get("backgroundColor"),i=a.get("borderWidth");r=Le(r);var n=La(t),o=Math.max(Math.round(i)*1.5,6),h="",l=Ke+":",u;Rt(["left","right"],n)>-1?(h+="top:50%",l+="translateY(-50%) rotate("+(u=n==="left"?-225:-45)+"deg)"):(h+="left:50%",l+="translateX(-50%) rotate("+(u=n==="top"?225:45)+"deg)");var s=u*Math.PI/180,g=o+i,c=g*Math.abs(Math.cos(s))+g*Math.abs(Math.sin(s)),v=Math.round(((c-Math.SQRT2*i)/2+Math.SQRT2*i-(c-g)/2)*100)/100;h+=";"+n+":-"+v+"px";var f=r+" solid "+i+"px;",d=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",h+";"+l+";","border-bottom:"+f,"border-right:"+f,"background-color:"+e+";"];return'<div style="'+d.join("")+'"></div>'}function Pa(a,r){var t="cubic-bezier(0.23,1,0.32,1)",e=" "+a/2+"s "+t,i="opacity"+e+",visibility"+e;return r||(e=" "+a+"s "+t,i+=j.transformSupported?","+Ke+e:",left"+e+",top"+e),Da+":"+i}function pt(a,r,t){var e=a.toFixed(0)+"px",i=r.toFixed(0)+"px";if(!j.transformSupported)return t?"top:"+i+";left:"+e+";":[["top",i],["left",e]];var n=j.transform3dSupported,o="translate"+(n?"3d":"")+"("+e+","+i+(n?",0":"")+")";return t?"top:0;left:0;"+Ke+":"+o+";":[["top",0],["left",0],[jt,o]]}function Ma(a){var r=[],t=a.get("fontSize"),e=a.getTextColor();e&&r.push("color:"+e),r.push("font:"+a.getFont()),t&&r.push("line-height:"+Math.round(t*3/2)+"px");var i=a.get("textShadowColor"),n=a.get("textShadowBlur")||0,o=a.get("textShadowOffsetX")||0,h=a.get("textShadowOffsetY")||0;return i&&n&&r.push("text-shadow:"+o+"px "+h+"px "+n+"px "+i),P(["decoration","align"],function(l){var u=a.get(l);u&&r.push("text-"+l+":"+u)}),r.join(";")}function ka(a,r,t){var e=[],i=a.get("transitionDuration"),n=a.get("backgroundColor"),o=a.get("shadowBlur"),h=a.get("shadowColor"),l=a.get("shadowOffsetX"),u=a.get("shadowOffsetY"),s=a.getModel("textStyle"),g=Ot(a,"html"),c=l+"px "+u+"px "+o+"px "+h;return e.push("box-shadow:"+c),r&&i&&e.push(Pa(i,t)),n&&e.push("background-color:"+n),P(["width","color","radius"],function(v){var f="border-"+v,d=kt(f),p=a.get(d);p!=null&&e.push(f+":"+p+(v==="color"?"":"px"))}),e.push(Ma(s)),g!=null&&e.push("padding:"+Pt(g).join("px ")+"px"),e.join(";")+";"}function yt(a,r,t,e,i){var n=r&&r.painter;if(t){var o=n&&n.getViewportRoot();o&&Cr(a,o,t,e,i)}else{a[0]=e,a[1]=i;var h=n&&n.getViewportRootOffset();h&&(a[0]+=h.offsetLeft,a[1]+=h.offsetTop)}a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var Oa=function(){function a(r,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,j.wxa)return null;var e=document.createElement("div");e.domBelongToZr=!0,this.el=e;var i=this._zr=r.getZr(),n=t.appendTo,o=n&&(X(n)?document.querySelector(n):st(n)?n:xe(n)&&n(r.getDom()));yt(this._styleCoord,i,o,r.getWidth()/2,r.getHeight()/2),(o||r.getDom()).appendChild(e),this._api=r,this._container=o;var h=this;e.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},e.onmousemove=function(l){if(l=l||window.event,!h._enterable){var u=i.handler,s=i.painter.getViewportRoot();_r(s,l,!0),u.dispatch("mousemove",l)}},e.onmouseleave=function(){h._inContent=!1,h._enterable&&h._show&&h.hideLater(h._hideDelay)}}return a.prototype.update=function(r){if(!this._container){var t=this._api.getDom(),e=Ta(t,"position"),i=t.style;i.position!=="absolute"&&e!=="absolute"&&(i.position="relative")}var n=r.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n,this.el.className=r.get("className")||""},a.prototype.show=function(r,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el,i=e.style,n=this._styleCoord;e.innerHTML?i.cssText=Aa+ka(r,!this._firstShow,this._longHide)+pt(n[0],n[1],!0)+("border-color:"+Le(t)+";")+(r.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(r,t,e,i,n){var o=this.el;if(r==null){o.innerHTML="";return}var h="";if(X(n)&&e.get("trigger")==="item"&&!Et(e)&&(h=Ia(e,i,n)),X(r))o.innerHTML=r+h;else if(r){o.innerHTML="",Z(r)||(r=[r]);for(var l=0;l<r.length;l++)st(r[l])&&r[l].parentNode!==o&&o.appendChild(r[l]);if(h&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=h,o.appendChild(u)}}},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el;return[r.offsetWidth,r.offsetHeight]},a.prototype.moveTo=function(r,t){var e=this._styleCoord;if(yt(e,this._zr,this._container,r,t),e[0]!=null&&e[1]!=null){var i=this.el.style,n=pt(e[0],e[1]);P(n,function(o){i[o[0]]=o[1]})}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){var r=this,t=this.el.style;t.visibility="hidden",t.opacity="0",j.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(ee(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el.parentNode;r&&r.removeChild(this.el),this.el=this._container=null},a}(),Ra=function(){function a(r){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=r.getZr(),bt(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return a.prototype.update=function(r){var t=r.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(r,t,e,i,n){var o=this;Gt(r)&&Tr(""),this.el&&this._zr.remove(this.el);var h=e.getModel("textStyle");this.el=new Se({style:{rich:t.richTextStyles,text:r,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:h.get("textShadowColor"),fill:e.get(["textStyle","color"]),padding:Ot(e,"richText"),verticalAlign:"top",align:"left"},z:e.get("z")}),P(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=e.get(u)}),P(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=h.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el,t=this.el.getBoundingRect(),e=mt(r.style);return[t.width+e.left+e.right,t.height+e.top+e.bottom]},a.prototype.moveTo=function(r,t){var e=this.el;if(e){var i=this._styleCoord;bt(i,this._zr,r,t),r=i[0],t=i[1];var n=e.style,o=re(n.borderWidth||0),h=mt(n);e.x=r+o+h.left,e.y=t+o+h.top,e.markRedraw()}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(ee(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function re(a){return Math.max(0,a)}function mt(a){var r=re(a.shadowBlur||0),t=re(a.shadowOffsetX||0),e=re(a.shadowOffsetY||0);return{left:re(r-t),right:re(r+t),top:re(r-e),bottom:re(r+e)}}function bt(a,r,t,e){a[0]=t,a[1]=e,a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var Ga=new ke({shape:{x:-1,y:-1,width:2,height:2}}),Ba=function(a){te(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,e){if(!(j.node||!e.getDom())){var i=t.getComponent("tooltip"),n=this._renderMode=Dr(i.get("renderMode"));this._tooltipContent=n==="richText"?new Ra(e):new Oa(e,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},r.prototype.render=function(t,e,i){if(!(j.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=i;var n=this._tooltipContent;n.update(t),n.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?Ar(this,"_updatePosition",50,"fixRate"):lt(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var t=this._tooltipModel,e=t.get("triggerOn");Lr("itemTooltip",this._api,ee(function(i,n,o){e!=="none"&&(e.indexOf(i)>=0?this._tryShow(n,o):i==="leave"&&this._hide(o))},this))},r.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,i=this._api,n=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&n!=="none"&&n!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,e,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(t,e,i,n){if(!(n.from===this.uid||j.node||!i.getDom())){var o=St(n,i);this._ticket="";var h=n.dataByCoordSys,l=Va(n,e,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:n.position,positionDefault:"bottom"},o)}else if(n.tooltip&&n.x!=null&&n.y!=null){var s=Ga;s.x=n.x,s.y=n.y,s.update(),J(s).tooltipConfig={name:null,option:n.tooltip},this._tryShow({offsetX:n.x,offsetY:n.y,target:s},o)}else if(h)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,dataByCoordSys:h,tooltipOption:n.tooltipOption},o);else if(n.seriesIndex!=null){if(this._manuallyAxisShowTip(t,e,i,n))return;var g=Ir(n,e),c=g.point[0],v=g.point[1];c!=null&&v!=null&&this._tryShow({offsetX:c,offsetY:v,target:g.el,position:n.position,positionDefault:"bottom"},o)}else n.x!=null&&n.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target},o))}},r.prototype.manuallyHideTip=function(t,e,i,n){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,n.from!==this.uid&&this._hide(St(n,i))},r.prototype._manuallyAxisShowTip=function(t,e,i,n){var o=n.seriesIndex,h=n.dataIndex,l=e.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||h==null||l==null)){var u=e.getSeriesByIndex(o);if(u){var s=u.getData(),g=pe([s.getItemModel(h),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(g.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:h,position:n.position}),!0}}},r.prototype._tryShow=function(t,e){var i=t.target,n=this._tooltipModel;if(n){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){var h=J(i);if(h.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;Pr(i,function(s){if(J(s).dataIndex!=null)return l=s,!0;if(J(s).tooltipConfig!=null)return u=s,!0},!0),l?this._showSeriesItemTooltip(t,l,e):u?this._showComponentItemTooltip(t,u,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},r.prototype._showOrMove=function(t,e){var i=t.get("showDelay");e=ee(e,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(e,i):e()},r.prototype._showAxisTooltip=function(t,e){var i=this._ecModel,n=this._tooltipModel,o=[e.offsetX,e.offsetY],h=pe([e.tooltipOption],n),l=this._renderMode,u=[],s=ut("section",{blocks:[],noHeader:!0}),g=[],c=new Ne;P(t,function(b){P(b.dataByAxis,function(m){var w=i.getComponent(m.axisDim+"Axis",m.axisIndex),S=m.value;if(!(!w||S==null)){var _=Mr(S,w.axis,i,m.seriesDataIndices,m.valueLabelOpt),C=ut("section",{header:_,noHeader:!kr(_),sortBlocks:!0,blocks:[]});s.blocks.push(C),P(m.seriesDataIndices,function(x){var T=i.getSeriesByIndex(x.seriesIndex),A=x.dataIndexInside,L=T.getDataParams(A);if(!(L.dataIndex<0)){L.axisDim=m.axisDim,L.axisIndex=m.axisIndex,L.axisType=m.axisType,L.axisId=m.axisId,L.axisValue=Or(w.axis,{value:S}),L.axisValueLabel=_,L.marker=c.makeTooltipMarker("item",Le(L.color),l);var M=ht(T.formatTooltip(A,!0,null)),I=M.frag;if(I){var V=pe([T],n).get("valueFormatter");C.blocks.push(V?Y({valueFormatter:V},I):I)}M.text&&g.push(M.text),u.push(L)}})}})}),s.blocks.reverse(),g.reverse();var v=e.position,f=h.get("order"),d=vt(s,c,l,f,i.get("useUTC"),h.get("textStyle"));d&&g.unshift(d);var p=l==="richText"?`

`:"<br/>",y=g.join(p);this._showOrMove(h,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(h,v,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(h,y,u,Math.random()+"",o[0],o[1],v,null,c)})},r.prototype._showSeriesItemTooltip=function(t,e,i){var n=this._ecModel,o=J(e),h=o.seriesIndex,l=n.getSeriesByIndex(h),u=o.dataModel||l,s=o.dataIndex,g=o.dataType,c=u.getData(g),v=this._renderMode,f=t.positionDefault,d=pe([c.getItemModel(s),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,f?{position:f}:null),p=d.get("trigger");if(!(p!=null&&p!=="item")){var y=u.getDataParams(s,g),b=new Ne;y.marker=b.makeTooltipMarker("item",Le(y.color),v);var m=ht(u.formatTooltip(s,!1,g)),w=d.get("order"),S=d.get("valueFormatter"),_=m.frag,C=_?vt(S?Y({valueFormatter:S},_):_,b,v,w,n.get("useUTC"),d.get("textStyle")):m.text,x="item_"+u.name+"_"+s;this._showOrMove(d,function(){this._showTooltipContent(d,C,y,x,t.offsetX,t.offsetY,t.position,t.target,b)}),i({type:"showTip",dataIndexInside:s,dataIndex:c.getRawIndex(s),seriesIndex:h,from:this.uid})}},r.prototype._showComponentItemTooltip=function(t,e,i){var n=this._renderMode==="html",o=J(e),h=o.tooltipConfig,l=h.option||{},u=l.encodeHTMLContent;if(X(l)){var s=l;l={content:s,formatter:s},u=!0}u&&n&&l.content&&(l=Ee(l),l.content=Rr(l.content));var g=[l],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&g.push(c),g.push({formatter:l.content});var v=t.positionDefault,f=pe(g,this._tooltipModel,v?{position:v}:null),d=f.get("content"),p=Math.random()+"",y=new Ne;this._showOrMove(f,function(){var b=Ee(f.get("formatterParams")||{});this._showTooltipContent(f,d,b,p,t.offsetX,t.offsetY,t.position,e,y)}),i({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(t,e,i,n,o,h,l,u,s){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var g=this._tooltipContent;g.setEnterable(t.get("enterable"));var c=t.get("formatter");l=l||t.get("position");var v=e,f=this._getNearestPoint([o,h],i,t.get("trigger"),t.get("borderColor")),d=f.color;if(c)if(X(c)){var p=t.ecModel.get("useUTC"),y=Z(i)?i[0]:i,b=y&&y.axisType&&y.axisType.indexOf("time")>=0;v=c,b&&(v=Gr(y.axisValue,v,p)),v=Br(v,i,!0)}else if(xe(c)){var m=ee(function(w,S){w===this._ticket&&(g.setContent(S,s,t,d,l),this._updatePosition(t,l,o,h,g,i,u))},this);this._ticket=n,v=c(i,n,m)}else v=c;g.setContent(v,s,t,d,l),g.show(t,d),this._updatePosition(t,l,o,h,g,i,u)}},r.prototype._getNearestPoint=function(t,e,i,n){if(i==="axis"||Z(e))return{color:n||(this._renderMode==="html"?"#fff":"none")};if(!Z(e))return{color:n||e.color||e.borderColor}},r.prototype._updatePosition=function(t,e,i,n,o,h,l){var u=this._api.getWidth(),s=this._api.getHeight();e=e||t.get("position");var g=o.getSize(),c=t.get("align"),v=t.get("verticalAlign"),f=l&&l.getBoundingRect().clone();if(l&&f.applyTransform(l.transform),xe(e)&&(e=e([i,n],h,o.el,f,{viewSize:[u,s],contentSize:g.slice()})),Z(e))i=U(e[0],u),n=U(e[1],s);else if(Gt(e)){var d=e;d.width=g[0],d.height=g[1];var p=be(d,{width:u,height:s});i=p.x,n=p.y,c=null,v=null}else if(X(e)&&l){var y=Ha(e,f,g,t.get("borderWidth"));i=y[0],n=y[1]}else{var y=za(i,n,o,u,s,c?null:20,v?null:20);i=y[0],n=y[1]}if(c&&(i-=xt(c)?g[0]/2:c==="right"?g[0]:0),v&&(n-=xt(v)?g[1]/2:v==="bottom"?g[1]:0),Et(t)){var y=Na(i,n,o,u,s);i=y[0],n=y[1]}o.moveTo(i,n)},r.prototype._updateContentNotChangedOnAxis=function(t,e){var i=this._lastDataByCoordSys,n=this._cbParamsList,o=!!i&&i.length===t.length;return o&&P(i,function(h,l){var u=h.dataByAxis||[],s=t[l]||{},g=s.dataByAxis||[];o=o&&u.length===g.length,o&&P(u,function(c,v){var f=g[v]||{},d=c.seriesDataIndices||[],p=f.seriesDataIndices||[];o=o&&c.value===f.value&&c.axisType===f.axisType&&c.axisId===f.axisId&&d.length===p.length,o&&P(d,function(y,b){var m=p[b];o=o&&y.seriesIndex===m.seriesIndex&&y.dataIndex===m.dataIndex}),n&&P(c.seriesDataIndices,function(y){var b=y.seriesIndex,m=e[b],w=n[b];m&&w&&w.data!==m.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=e,!!o},r.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},r.prototype.dispose=function(t,e){j.node||!e.getDom()||(lt(this,"_updatePosition"),this._tooltipContent.dispose(),zr("itemTooltip",e))},r.type="tooltip",r}(Bt);function pe(a,r,t){var e=r.ecModel,i;t?(i=new me(t,e,e),i=new me(r.option,i,e)):i=r;for(var n=a.length-1;n>=0;n--){var o=a[n];o&&(o instanceof me&&(o=o.get("tooltip",!0)),X(o)&&(o={formatter:o}),o&&(i=new me(o,i,e)))}return i}function St(a,r){return a.dispatchAction||ee(r.dispatchAction,r)}function za(a,r,t,e,i,n,o){var h=t.getSize(),l=h[0],u=h[1];return n!=null&&(a+l+n+2>e?a-=l+n:a+=n),o!=null&&(r+u+o>i?r-=u+o:r+=o),[a,r]}function Na(a,r,t,e,i){var n=t.getSize(),o=n[0],h=n[1];return a=Math.min(a+o,e)-o,r=Math.min(r+h,i)-h,a=Math.max(a,0),r=Math.max(r,0),[a,r]}function Ha(a,r,t,e){var i=t[0],n=t[1],o=Math.ceil(Math.SQRT2*e)+8,h=0,l=0,u=r.width,s=r.height;switch(a){case"inside":h=r.x+u/2-i/2,l=r.y+s/2-n/2;break;case"top":h=r.x+u/2-i/2,l=r.y-n-o;break;case"bottom":h=r.x+u/2-i/2,l=r.y+s+o;break;case"left":h=r.x-i-o,l=r.y+s/2-n/2;break;case"right":h=r.x+u+o,l=r.y+s/2-n/2}return[h,l]}function xt(a){return a==="center"||a==="middle"}function Va(a,r,t){var e=Nr(a).queryOptionMap,i=e.keys()[0];if(!(!i||i==="series")){var n=Hr(r,i,e.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=n.models[0];if(o){var h=t.getViewOfComponentModel(o),l;if(h.group.traverse(function(u){var s=J(u).tooltipConfig;if(s&&s.name===a.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function ti(a){Ie(Vr),a.registerComponentModel(_a),a.registerComponentView(Ba),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ct),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ct)}var Wa=function(a,r){if(r==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},Ue=function(a){te(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.layoutMode={type:"box",ignoreSize:!0},t}return r.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},r.prototype.mergeOption=function(t,e){a.prototype.mergeOption.call(this,t,e),this._updateSelector(t)},r.prototype._updateSelector=function(t){var e=t.selector,i=this.ecModel;e===!0&&(e=t.selector=["all","inverse"]),Z(e)&&P(e,function(n,o){X(n)&&(n={type:n}),e[o]=Wr(n,Wa(i,n.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var e=!1,i=0;i<t.length;i++){var n=t[i].get("name");if(this.isSelected(n)){this.select(n),e=!0;break}}!e&&this.select(t[0].get("name"))}},r.prototype._updateData=function(t){var e=[],i=[];t.eachRawSeries(function(l){var u=l.name;i.push(u);var s;if(l.legendVisualProvider){var g=l.legendVisualProvider,c=g.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(c)),c.length?e=e.concat(c):s=!0}else s=!0;s&&Fr(l)&&e.push(l.name)}),this._availableNames=i;var n=this.get("data")||e,o=zt(),h=Yr(n,function(l){return(X(l)||Ze(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new me(l,this,this.ecModel))},this);this._data=Xr(h,function(l){return!!l})},r.prototype.getData=function(){return this._data},r.prototype.select=function(t){var e=this.option.selected,i=this.get("selectedMode");if(i==="single"){var n=this._data;P(n,function(o){e[o.get("name")]=!1})}e[t]=!0},r.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},r.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},r.prototype.allSelect=function(){var t=this._data,e=this.option.selected;P(t,function(i){e[i.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;P(t,function(i){var n=i.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]})},r.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&Rt(this._availableNames,t)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}(Mt),ue=ae,je=P,Ae=Nt,$t=function(a){te(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.newlineDisabled=!1,t}return r.prototype.init=function(){this.group.add(this._contentGroup=new Ae),this.group.add(this._selectorGroup=new Ae),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(t,e,i){var n=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),h=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&h==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=h==="horizontal"?"end":"start"),this.renderInner(o,t,e,i,l,h,u);var s=t.getBoxLayoutParams(),g={width:i.getWidth(),height:i.getHeight()},c=t.get("padding"),v=be(s,g,c),f=this.layoutInner(t,o,v,n,l,u),d=be(Dt({width:f.width,height:f.height},s),g,c);this.group.x=d.x-f.x,this.group.y=d.y-f.y,this.group.markRedraw(),this.group.add(this._backgroundEl=wa(f,t))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(t,e,i,n,o,h,l){var u=this.getContentGroup(),s=zt(),g=e.get("selectedMode"),c=[];i.eachRawSeries(function(v){!v.get("legendHoverLink")&&c.push(v.id)}),je(e.getData(),function(v,f){var d=v.get("name");if(!this.newlineDisabled&&(d===""||d===`
`)){var p=new Ae;p.newline=!0,u.add(p);return}var y=i.getSeriesByName(d)[0];if(!s.get(d))if(y){var b=y.getData(),m=b.getVisual("legendLineStyle")||{},w=b.getVisual("legendIcon"),S=b.getVisual("style"),_=this._createItem(y,d,f,v,e,t,m,S,w,g,n);_.on("click",ue(wt,d,null,n,c)).on("mouseover",ue(qe,y.name,null,n,c)).on("mouseout",ue($e,y.name,null,n,c)),i.ssr&&_.eachChild(function(C){var x=J(C);x.seriesIndex=y.seriesIndex,x.dataIndex=f,x.ssrType="legend"}),s.set(d,!0)}else i.eachRawSeries(function(C){if(!s.get(d)&&C.legendVisualProvider){var x=C.legendVisualProvider;if(!x.containName(d))return;var T=x.indexOfName(d),A=x.getItemVisual(T,"style"),L=x.getItemVisual(T,"legendIcon"),M=Er(A.fill);M&&M[3]===0&&(M[3]=.2,A=Y(Y({},A),{fill:Ur(M,"rgba")}));var I=this._createItem(C,d,f,v,e,t,{},A,L,g,n);I.on("click",ue(wt,null,d,n,c)).on("mouseover",ue(qe,null,d,n,c)).on("mouseout",ue($e,null,d,n,c)),i.ssr&&I.eachChild(function(V){var G=J(V);G.seriesIndex=C.seriesIndex,G.dataIndex=f,G.ssrType="legend"}),s.set(d,!0)}},this)},this),o&&this._createSelector(o,e,n,h,l)},r.prototype._createSelector=function(t,e,i,n,o){var h=this.getSelectorGroup();je(t,function(u){var s=u.type,g=new Se({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:s==="all"?"legendAllSelect":"legendInverseSelect"})}});h.add(g);var c=e.getModel("selectorLabel"),v=e.getModel(["emphasis","selectorLabel"]);It(g,{normal:c,emphasis:v},{defaultText:u.title}),ft(g)})},r.prototype._createItem=function(t,e,i,n,o,h,l,u,s,g,c){var v=t.visualDrawType,f=o.get("itemWidth"),d=o.get("itemHeight"),p=o.isSelected(e),y=n.get("symbolRotate"),b=n.get("symbolKeepAspect"),m=n.get("icon");s=m||s||"roundRect";var w=Fa(s,n,l,u,v,p,c),S=new Ae,_=n.getModel("textStyle");if(xe(t.getLegendIcon)&&(!m||m==="inherit"))S.add(t.getLegendIcon({itemWidth:f,itemHeight:d,icon:s,iconRotate:y,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}));else{var C=m==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;S.add(Ya({itemWidth:f,itemHeight:d,icon:s,iconRotate:C,itemStyle:w.itemStyle,symbolKeepAspect:b}))}var x=h==="left"?f+5:-5,T=h,A=o.get("formatter"),L=e;X(A)&&A?L=A.replace("{name}",e??""):xe(A)&&(L=A(e));var M=p?_.getTextColor():n.get("inactiveColor");S.add(new Se({style:jr(_,{text:L,x,y:d/2,fill:M,align:T,verticalAlign:"middle"},{inheritColor:M})}));var I=new ke({shape:S.getBoundingRect(),style:{fill:"transparent"}}),V=n.getModel("tooltip");return V.get("show")&&qr({el:I,componentModel:o,itemName:e,itemTooltipOption:V.option}),S.add(I),S.eachChild(function(G){G.silent=!0}),I.silent=!g,this.getContentGroup().add(S),ft(S),S.__legendDataIndex=i,S},r.prototype.layoutInner=function(t,e,i,n,o,h){var l=this.getContentGroup(),u=this.getSelectorGroup();he(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var s=l.getBoundingRect(),g=[-s.x,-s.y];if(u.markRedraw(),l.markRedraw(),o){he("horizontal",u,t.get("selectorItemGap",!0));var c=u.getBoundingRect(),v=[-c.x,-c.y],f=t.get("selectorButtonGap",!0),d=t.getOrient().index,p=d===0?"width":"height",y=d===0?"height":"width",b=d===0?"y":"x";h==="end"?v[d]+=s[p]+f:g[d]+=c[p]+f,v[1-d]+=s[y]/2-c[y]/2,u.x=v[0],u.y=v[1],l.x=g[0],l.y=g[1];var m={x:0,y:0};return m[p]=s[p]+f+c[p],m[y]=Math.max(s[y],c[y]),m[b]=Math.min(0,c[b]+v[1-d]),m}else return l.x=g[0],l.y=g[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(Bt);function Fa(a,r,t,e,i,n,o){function h(p,y){p.lineWidth==="auto"&&(p.lineWidth=y.lineWidth>0?2:0),je(p,function(b,m){p[m]==="inherit"&&(p[m]=y[m])})}var l=r.getModel("itemStyle"),u=l.getItemStyle(),s=a.lastIndexOf("empty",0)===0?"fill":"stroke",g=l.getShallow("decal");u.decal=!g||g==="inherit"?e.decal:$r(g,o),u.fill==="inherit"&&(u.fill=e[i]),u.stroke==="inherit"&&(u.stroke=e[s]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?e:t).opacity),h(u,e);var c=r.getModel("lineStyle"),v=c.getLineStyle();if(h(v,t),u.fill==="auto"&&(u.fill=e.fill),u.stroke==="auto"&&(u.stroke=e.fill),v.stroke==="auto"&&(v.stroke=e.fill),!n){var f=r.get("inactiveBorderWidth"),d=u[s];u.lineWidth=f==="auto"?e.lineWidth>0&&d?2:0:u.lineWidth,u.fill=r.get("inactiveColor"),u.stroke=r.get("inactiveBorderColor"),v.stroke=c.get("inactiveColor"),v.lineWidth=c.get("inactiveWidth")}return{itemStyle:u,lineStyle:v}}function Ya(a){var r=a.icon||"roundRect",t=Zr(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return t.setStyle(a.itemStyle),t.rotation=(a.iconRotate||0)*Math.PI/180,t.setOrigin([a.itemWidth/2,a.itemHeight/2]),r.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function wt(a,r,t,e){$e(a,r,t,e),t.dispatchAction({type:"legendToggleSelect",name:a??r}),qe(a,r,t,e)}function Zt(a){for(var r=a.getZr().storage.getDisplayList(),t,e=0,i=r.length;e<i&&!(t=r[e].states.emphasis);)e++;return t&&t.hoverLayer}function qe(a,r,t,e){Zt(t)||t.dispatchAction({type:"highlight",seriesName:a,name:r,excludeSeriesId:e})}function $e(a,r,t,e){Zt(t)||t.dispatchAction({type:"downplay",seriesName:a,name:r,excludeSeriesId:e})}function Xa(a){var r=a.findComponents({mainType:"legend"});r&&r.length&&a.filterSeries(function(t){for(var e=0;e<r.length;e++)if(!r[e].isSelected(t.name))return!1;return!0})}function ye(a,r,t){var e={},i=a==="toggleSelected",n;return t.eachComponent("legend",function(o){i&&n!=null?o[n?"select":"unSelect"](r.name):a==="allSelect"||a==="inverseSelect"?o[a]():(o[a](r.name),n=o.isSelected(r.name));var h=o.getData();P(h,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var s=o.isSelected(u);e.hasOwnProperty(u)?e[u]=e[u]&&s:e[u]=s}})}),a==="allSelect"||a==="inverseSelect"?{selected:e}:{name:r.name,selected:e}}function Ea(a){a.registerAction("legendToggleSelect","legendselectchanged",ae(ye,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",ae(ye,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",ae(ye,"inverseSelect")),a.registerAction("legendSelect","legendselected",ae(ye,"select")),a.registerAction("legendUnSelect","legendunselected",ae(ye,"unSelect"))}function Kt(a){a.registerComponentModel(Ue),a.registerComponentView($t),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,Xa),a.registerSubTypeDefaulter("legend",function(){return"plain"}),Ea(a)}var Ua=function(a){te(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},r.prototype.init=function(t,e,i){var n=Kr(t);a.prototype.init.call(this,t,e,i),_t(this,t,n)},r.prototype.mergeOption=function(t,e){a.prototype.mergeOption.call(this,t,e),_t(this,this.option,t)},r.type="legend.scroll",r.defaultOption=Qr(Ue.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(Ue);function _t(a,r,t){var e=a.getOrient(),i=[1,1];i[e.index]=0,Jr(r,t,{type:"box",ignoreSize:!!i})}var Ct=Nt,We=["width","height"],Fe=["x","y"],ja=function(a){te(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.newlineDisabled=!0,t._currentIndex=0,t}return r.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Ct),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Ct)},r.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(t,e,i,n,o,h,l){var u=this;a.prototype.renderInner.call(this,t,e,i,n,o,h,l);var s=this._controllerGroup,g=e.get("pageIconSize",!0),c=Z(g)?g:[g,g];f("pagePrev",0);var v=e.getModel("pageTextStyle");s.add(new Se({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),f("pageNext",1);function f(d,p){var y=d+"DataIndex",b=ea(e.get("pageIcons",!0)[e.getOrient().name][p],{onclick:ee(u._pageGo,u,y,e,n)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});b.name=d,s.add(b)}},r.prototype.layoutInner=function(t,e,i,n,o,h){var l=this.getSelectorGroup(),u=t.getOrient().index,s=We[u],g=Fe[u],c=We[1-u],v=Fe[1-u];o&&he("horizontal",l,t.get("selectorItemGap",!0));var f=t.get("selectorButtonGap",!0),d=l.getBoundingRect(),p=[-d.x,-d.y],y=Ee(i);o&&(y[s]=i[s]-d[s]-f);var b=this._layoutContentAndController(t,n,y,u,s,c,v,g);if(o){if(h==="end")p[u]+=b[s]+f;else{var m=d[s]+f;p[u]-=m,b[g]-=m}b[s]+=d[s]+f,p[1-u]+=b[v]+b[c]/2-d[c]/2,b[c]=Math.max(b[c],d[c]),b[v]=Math.min(b[v],d[v]+p[1-u]),l.x=p[0],l.y=p[1],l.markRedraw()}return b},r.prototype._layoutContentAndController=function(t,e,i,n,o,h,l,u){var s=this.getContentGroup(),g=this._containerGroup,c=this._controllerGroup;he(t.get("orient"),s,t.get("itemGap"),n?i.width:null,n?null:i.height),he("horizontal",c,t.get("pageButtonItemGap",!0));var v=s.getBoundingRect(),f=c.getBoundingRect(),d=this._showController=v[o]>i[o],p=[-v.x,-v.y];e||(p[n]=s[u]);var y=[0,0],b=[-f.x,-f.y],m=Ye(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(d){var w=t.get("pageButtonPosition",!0);w==="end"?b[n]+=i[o]-f[o]:y[n]+=f[o]+m}b[1-n]+=v[h]/2-f[h]/2,s.setPosition(p),g.setPosition(y),c.setPosition(b);var S={x:0,y:0};if(S[o]=d?i[o]:v[o],S[h]=Math.max(v[h],f[h]),S[l]=Math.min(0,f[l]+b[1-n]),g.__rectSize=i[o],d){var _={x:0,y:0};_[o]=Math.max(i[o]-f[o]-m,0),_[h]=S[h],g.setClipPath(new ke({shape:_})),g.__rectSize=_[o]}else c.eachChild(function(x){x.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(t);return C.pageIndex!=null&&Xe(s,{x:C.contentPosition[0],y:C.contentPosition[1]},d?t:null),this._updatePageInfoView(t,C),S},r.prototype._pageGo=function(t,e,i){var n=this._getPageInfo(e)[t];n!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:e.id})},r.prototype._updatePageInfoView=function(t,e){var i=this._controllerGroup;P(["pagePrev","pageNext"],function(s){var g=s+"DataIndex",c=e[g]!=null,v=i.childOfName(s);v&&(v.setStyle("fill",c?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),v.cursor=c?"pointer":"default")});var n=i.childOfName("pageText"),o=t.get("pageFormatter"),h=e.pageIndex,l=h!=null?h+1:0,u=e.pageCount;n&&o&&n.setStyle("text",X(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},r.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),i=this.getContentGroup(),n=this._containerGroup.__rectSize,o=t.getOrient().index,h=We[o],l=Fe[o],u=this._findTargetItemIndex(e),s=i.children(),g=s[u],c=s.length,v=c?1:0,f={contentPosition:[i.x,i.y],pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!g)return f;var d=w(g);f.contentPosition[o]=-d.s;for(var p=u+1,y=d,b=d,m=null;p<=c;++p)m=w(s[p]),(!m&&b.e>y.s+n||m&&!S(m,y.s))&&(b.i>y.i?y=b:y=m,y&&(f.pageNextDataIndex==null&&(f.pageNextDataIndex=y.i),++f.pageCount)),b=m;for(var p=u-1,y=d,b=d,m=null;p>=-1;--p)m=w(s[p]),(!m||!S(b,m.s))&&y.i<b.i&&(b=y,f.pagePrevDataIndex==null&&(f.pagePrevDataIndex=y.i),++f.pageCount,++f.pageIndex),y=m;return f;function w(_){if(_){var C=_.getBoundingRect(),x=C[l]+_[l];return{s:x,e:x+C[h],i:_.__legendDataIndex}}}function S(_,C){return _.e>=C&&_.s<=C+n}},r.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var e,i=this.getContentGroup(),n;return i.eachChild(function(o,h){var l=o.__legendDataIndex;n==null&&l!=null&&(n=h),l===t&&(e=h)}),e??n},r.type="legend.scroll",r}($t);function qa(a){a.registerAction("legendScroll","legendscroll",function(r,t){var e=r.scrollDataIndex;e!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:r},function(i){i.setScrollDataIndex(e)})})}function $a(a){Ie(Kt),a.registerComponentModel(Ua),a.registerComponentView(ja),qa(a)}function ri(a){Ie(Kt),Ie($a)}export{ma as L,ti as a,ri as b,ya as c,va as d,ua as g,Ja as i,ei as l,wa as m,la as s,Qa as u};
