var ot=Object.defineProperty;var it=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x=(e,t,r)=>it(e,typeof t!="symbol"?t+"":t,r);import{C as Pe,a as ct,s as lt,A as ut,R as dt,V as we,T as Le}from"./chunks/three.module.DEIqzEw6.js";import{d as I,s as L,a6 as Ie,y as Me,$ as De,h as q,v as X,I as v,F as Be,E as _,M as Y,a2 as Oe,a7 as Z,N as C,a8 as pt,a9 as ht,z as ft,o as re,b as Ke,w as mt,j as z,k as ee,c as yt,a as $e,a3 as gt}from"./chunks/framework.CDwh3-Fg.js";const J=(e,t,r)=>{if(!t)return;const n=Array.isArray(t)?t:t.match(/([^[.\]])+/g),s=n==null?void 0:n.reduce((i,c)=>i&&i[c],e);return s===void 0?r:s},bt=()=>{const e="[object Number]",r=Object.prototype.toString;function n(i){return!!i&&typeof i=="object"}return function(c){return typeof c=="number"||n(c)&&r.call(c)==e}},xt=bt(),Et=(e,t,r)=>{const n=Array.isArray(t)?t:t.match(/([^[.\]])+/g);n==null||n.reduce((s,i,c)=>(s[i]===void 0&&(s[i]={}),c===n.length-1&&(s[i]=r),s[i]),e)},vt=e=>["onClick","onContextMenu","onDoubleClick","onPointerUp","onPointerDown","onPointerOver","onPointerOut","onPointerEnter","onPointerLeave","onPointerMove","onWheel"].includes(e),V=e=>{var t;return(e==null?void 0:e.metaType)==="domMeta"?!0:(t=e==null?void 0:e.props)==null?void 0:t["data-lunchbox"]},j=e=>(e==null?void 0:e.metaType)==="standardMeta",se=e=>e.isLunchboxRootNode;function kt(e={}){const t={text:e.text??""};return new G.RendererCommentNode({...t,...e,metaType:"commentMeta"})}function At(e={}){const r={domElement:document.createElement(e.type??"")};return new G.RendererDomNode({...r,...e,metaType:"domMeta"})}function Ct(e={}){const t={text:e.text??""};return new G.RendererTextNode({...e,...t,metaType:"textMeta"})}function Rt(e={},t={}){const r={attached:e.attached??[],attachedArray:e.attachedArray??{},instance:e.instance??null},n=new G.RendererStandardNode({...e,...r,metaType:"standardMeta"});return n.type&&!se(n)&&!n.instance&&(n.instance=Ot({...n,props:{...n.props,...t}})),n}function Pt({node:e,key:t,interactables:r,value:n}){return e.eventListeners[t]||(e.eventListeners[t]=[]),e.eventListenerRemoveFunctions[t]||(e.eventListenerRemoveFunctions[t]=[]),e.eventListeners[t].push(n),wt.includes(t)&&e.instance&&!r.value.includes(e)&&(r.value.push(e),e.eventListenerRemoveFunctions[t].push(()=>{const s=r.value.indexOf(e);s!==-1&&r.value.splice(s,1)})),e}const wt=["onClick","onPointerUp","onPointerDown","onPointerOver","onPointerOut","onPointerEnter","onPointerLeave","onPointerMove"],Ne=(e,t,r,n,s)=>{var c,d;if(!(t!=null&&t.domElement)||!r||!e)return;n=n??window.innerWidth,s=s??window.innerHeight;const i=n/s;if(((c=e.type)==null?void 0:c.toLowerCase())==="perspectivecamera"){const p=e;p.aspect=i,p.updateProjectionMatrix()}else if(((d=e.type)==null?void 0:d.toLowerCase())==="orthographiccamera"){const p=e,a=s/n;p.top=a*10,p.bottom=-a*10,p.right=10,p.left=-10,p.updateProjectionMatrix()}t.setSize(n,s),r&&e&&t.render(Z(r),Z(e))},Lt=e=>{const t=getComputedStyle(e),r=e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),n=e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom);return{width:r,height:n}},Bt=(e,t,r,n,s)=>{var p;const i=(p=e.value)==null?void 0:p.domElement;if(!i)throw new Error("missing container");const c=()=>{if(s==="container"){const a=Lt(i);Ne(t,r,n,a.width,a.height)}else Ne(t,r,n)};c();let d=new ResizeObserver(()=>{c()});return i&&d.observe(i),{dispose(){i&&d.unobserve(i)}}},Nt=I({name:"LunchboxScene",setup(e,{slots:t}){return()=>v(_("scene"),null,{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t)]}})}}),Tt=I({name:"LunchboxEventHandlers",setup(){const e=st(),t=rt(),r=L({x:1/0,y:1/0}),n=L(!1);let s=[];const i=new dt(new we,new we(0,0,-1)),c=({element:l,eventKeys:h,intersection:m})=>{l&&h.forEach(b=>{l.eventListeners[b]&&l.eventListeners[b].forEach(k=>{k({intersection:m})})})};bn(l=>{if(!(l!=null&&l.domElement))return;const{domElement:h}=l,m=w=>{const u=(h.width??1)/t.dpr,f=(h.height??1)/t.dpr;r.value.x=w.offsetX/u*2-1,r.value.y=-(w.offsetY/f)*2+1},b=()=>n.value=!0,k=()=>n.value=!1;h.addEventListener("pointermove",m),h.addEventListener("pointerdown",b),h.addEventListener("pointerup",k)});const d=gn(),p=()=>{const l=d.value;if(!l)return;i.setFromCamera(r.value,l);const h=i.intersectObjects((e==null?void 0:e.value.map(u=>u.instance))??[]);let m=[],b=[],k=[];m=s.map(u=>u.intersection),h==null||h.forEach(u=>{if(s.findIndex(y=>y.intersection.object===u.object)===-1){const y=e==null?void 0:e.value.find(A=>{var R;return((R=A.instance)==null?void 0:R.uuid)===u.object.uuid});y&&b.push({element:y,intersection:u})}else{const y=e==null?void 0:e.value.find(A=>{var R;return((R=A.instance)==null?void 0:R.uuid)===u.object.uuid});y&&k.push({element:y,intersection:u})}const g=m.findIndex(y=>y.object.uuid===u.object.uuid);g!==-1&&m.splice(g,1)});const w=m.map(u=>({element:e==null?void 0:e.value.find(f=>{var g;return((g=f.instance)==null?void 0:g.uuid)===u.object.uuid}),intersection:u}));b.forEach(({element:u,intersection:f})=>{c({element:u,eventKeys:["onPointerEnter"],intersection:f})}),k.forEach(({element:u,intersection:f})=>{c({element:u,eventKeys:["onPointerOver","onPointerMove"],intersection:f})}),w.forEach(({element:u,intersection:f})=>{c({element:u,eventKeys:["onPointerLeave","onPointerOut"],intersection:f})}),s=[].concat(b,k)};tn(p),De(()=>nn(p));const o=["onClick","onPointerDown","onPointerUp"];return X(n,l=>{p();const h=[];s.forEach(m=>{o.forEach(b=>{var w,u;const k=m.element.uuid+b;l&&(b==="onClick"||b==="onPointerDown")?h.includes(k)||((w=m.element.eventListeners[b])==null||w.forEach(f=>f({intersection:m.intersection})),h.push(k)):!l&&b==="onPointerUp"&&(h.includes(k)||((u=m.element.eventListeners[b])==null||u.forEach(f=>f({intersection:m.intersection})),h.push(k)))})})}),()=>v(_("object3D"),null,null)}}),Te=e=>({position:e,top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",display:"block"}),St=I({name:"Lunchbox",props:{background:String,cameraArgs:Array,cameraLook:Array,cameraLookAt:Array,cameraPosition:Array,dpr:Number,ortho:Boolean,orthographic:Boolean,r3f:Boolean,rendererArguments:Object,rendererProperties:Object,sizePolicy:String,shadow:[Boolean,Object],transparent:Boolean,zoom:Number,updateSource:Object},setup(e,t){const r=L();let n=e.dpr??-1;const s=L(),i=L(),c=L(),d=L(),p=rt(),a=xn(),o=En(),l=Ie({}),h=vn();e.r3f&&Pe&&(Pe.legacyMode=!1);const m=st();Me(async()=>{var y,A,R,B,N,M,D,T,O,S,K,$,F,U,ae,oe,ie,ce,le,ue,de,pe,he,fe,me,ye,ge,be,xe,Ee,ve,ke,Ae,H,Ce,Re;if(!r.value&&!((R=(A=(y=t.slots)==null?void 0:y.renderer)==null?void 0:A.call(y))!=null&&R.length))throw new Error("missing canvas");for((M=(N=(B=t.slots)==null?void 0:B.camera)==null?void 0:N.call(B))!=null&&M.length||(e.cameraPosition&&(l.position=e.cameraPosition),(e.cameraLook||e.cameraLookAt)&&(l.lookAt=e.cameraLook||e.cameraLookAt),e.zoom!==void 0&&(l.zoom=e.zoom)),(T=(D=d.value)==null?void 0:D.$el)!=null&&T.instance&&e.background&&(d.value.$el.instance.background=new ct(e.background)),n===-1&&(n=window.devicePixelRatio),a==null||a({dpr:n});!((S=(O=i.value)==null?void 0:O.$el)!=null&&S.instance)&&!((F=($=(K=i.value)==null?void 0:K.component)==null?void 0:$.ctx.$el)!=null&&F.instance);)await new Promise(P=>requestAnimationFrame(P));for(;!((ae=(U=d.value)==null?void 0:U.$el)!=null&&ae.instance)&&!((ce=(ie=(oe=d.value)==null?void 0:oe.component)==null?void 0:ie.ctx.$el)!=null&&ce.instance);)await new Promise(P=>requestAnimationFrame(P));const u=((ue=(le=i.value)==null?void 0:le.$el)==null?void 0:ue.instance)??((he=(pe=(de=i.value)==null?void 0:de.component)==null?void 0:pe.ctx.$el)==null?void 0:he.instance);u.setPixelRatio(p.dpr);const f=((me=(fe=d.value)==null?void 0:fe.$el)==null?void 0:me.instance)??((be=(ge=(ye=d.value)==null?void 0:ye.component)==null?void 0:ge.ctx.$el)==null?void 0:be.instance),g=((Ee=(xe=c.value)==null?void 0:xe.$el)==null?void 0:Ee.instance)??((Ae=(ke=(ve=c.value)==null?void 0:ve.component)==null?void 0:ke.ctx.$el)==null?void 0:Ae.instance);if(!((Re=(Ce=(H=t.slots)==null?void 0:H.renderer)==null?void 0:Ce.call(H))!=null&&Re.length)){Bt(s,g,u,f,e.sizePolicy),e.r3f&&(u.outputEncoding=lt,u.toneMapping=ut);const P={shadow:e.shadow};P!=null&&P.shadow&&(u.shadowMap.enabled=!0,typeof P.shadow=="object"&&(u.shadowMap.type=P.shadow.type))}if(!o)throw new Error("error creating app");o.config.globalProperties.lunchbox.camera=g,o.config.globalProperties.lunchbox.renderer=u,o.config.globalProperties.lunchbox.scene=f;for(let P of h??[])P({app:o,camera:g,renderer:u,scene:f});et({app:o,camera:g,renderer:u,scene:f,updateSource:e.updateSource})}),De(()=>{sn(),on()});const b=e.sizePolicy==="container"?"static":"absolute",k=e.sizePolicy==="container"?"static":"fixed",w=q(()=>{var f,g;const u=(g=(f=t.slots)==null?void 0:f.camera)==null?void 0:g.call(f).find(y=>{var A;return(A=y.type)==null?void 0:A.name});return u});return X(w,async(u,f)=>{var g,y;u&&((g=u==null?void 0:u.props)==null?void 0:g.key)!==((y=f==null?void 0:f.props)==null?void 0:y.key)&&(c.value=u)},{immediate:!0}),()=>{var u,f,g,y,A,R,B,N,M,D,T,O,S,K,$;return v(Be,null,[(g=(f=(u=t.slots)==null?void 0:u.renderer)==null?void 0:f.call(u))!=null&&g.length?i.value=(A=(y=t.slots)==null?void 0:y.renderer)==null?void 0:A.call(y)[0]:v(Be,null,[v("div",{class:"lunchbox-container",style:Te(b),ref:s,"data-lunchbox":"true"},[v("canvas",{ref:r,class:"lunchbox-canvas",style:Te(k),"data-lunchbox":"true"},null)]),((R=r.value)==null?void 0:R.domElement)&&v(_("webGLRenderer"),Y(e.rendererProperties??{},{ref:i,args:[{alpha:e.transparent,antialias:!0,canvas:(B=r.value)==null?void 0:B.domElement,powerPreference:e.r3f?"high-performance":"default",...e.rendererArguments??{}}]}),null)]),(D=(M=(N=t.slots)==null?void 0:N.scene)==null?void 0:M.call(N))!=null&&D.length?d.value=(O=(T=t.slots)==null?void 0:T.scene)==null?void 0:O.call(T)[0]:v(Nt,{ref:d},{default:()=>{var F,U;return[(U=(F=t.slots)==null?void 0:F.default)==null?void 0:U.call(F)]}}),($=(K=(S=t.slots)==null?void 0:S.camera)==null?void 0:K.call(S))!=null&&$.length?c.value:e.ortho||e.orthographic?v(_("orthographicCamera"),Y({ref:c,args:e.cameraArgs??[]},l),null):v(_("perspectiveCamera"),Y({ref:c,args:e.cameraArgs??[e.r3f?75:45,.5625,1,1e3]},l),null),(m==null?void 0:m.value.length)&&v(Tt,null,null)])}}}),Ft=["mesh","instancedMesh","scene","sprite","object3D","instancedBufferGeometry","bufferGeometry","boxBufferGeometry","circleBufferGeometry","coneBufferGeometry","cylinderBufferGeometry","dodecahedronBufferGeometry","extrudeBufferGeometry","icosahedronBufferGeometry","latheBufferGeometry","octahedronBufferGeometry","parametricBufferGeometry","planeBufferGeometry","polyhedronBufferGeometry","ringBufferGeometry","shapeBufferGeometry","sphereBufferGeometry","tetrahedronBufferGeometry","textBufferGeometry","torusBufferGeometry","torusKnotBufferGeometry","tubeBufferGeometry","wireframeGeometry","parametricGeometry","tetrahedronGeometry","octahedronGeometry","icosahedronGeometry","dodecahedronGeometry","polyhedronGeometry","tubeGeometry","torusKnotGeometry","torusGeometry","sphereGeometry","ringGeometry","planeGeometry","latheGeometry","shapeGeometry","extrudeGeometry","edgesGeometry","coneGeometry","cylinderGeometry","circleGeometry","boxGeometry","material","shadowMaterial","spriteMaterial","rawShaderMaterial","shaderMaterial","pointsMaterial","meshPhysicalMaterial","meshStandardMaterial","meshPhongMaterial","meshToonMaterial","meshNormalMaterial","meshLambertMaterial","meshDepthMaterial","meshDistanceMaterial","meshBasicMaterial","meshMatcapMaterial","lineDashedMaterial","lineBasicMaterial","light","spotLightShadow","spotLight","pointLight","rectAreaLight","hemisphereLight","directionalLightShadow","directionalLight","ambientLight","lightShadow","ambientLightProbe","hemisphereLightProbe","lightProbe","texture","videoTexture","dataTexture","dataTexture3D","compressedTexture","cubeTexture","canvasTexture","depthTexture","textureLoader","group","catmullRomCurve3","points","raycaster","cameraHelper","camera","perspectiveCamera","orthographicCamera","cubeCamera","arrayCamera","webGLRenderer"],te={},_t=e=>I({inheritAttrs:!1,name:e,setup(t,r){return()=>{var n,s;return Oe(e,r.attrs,((s=(n=r.slots)==null?void 0:n.default)==null?void 0:s.call(n))||[])}}}),Gt=Ft.map(_t).reduce((e,t)=>(e[t.name]=t,e),{}),Se={...Gt,Lunchbox:St},jt=e=>I({inheritAttrs:!1,name:e,render(){var t,r;return Oe(e,this.$attrs,((r=(t=this.$slots)==null?void 0:t.default)==null?void 0:r.call(t))||[])}}),It=({app:e,...t})=>{Object.keys(t).forEach(r=>{e.component(r,jt(r)),te[r]=t[r]})};function Mt({node:e,prop:t}){return typeof t=="string"&&t.startsWith("$attachedArray")?e.attachedArray[t.replace("$attachedArray.","")]:typeof t=="string"&&t.startsWith("$attached")?e.attached[t.replace("$attached.","")]:t}function Dt({node:e,prop:t}){const r=typeof t=="string"&&t.startsWith("$attachedArray"),n=Mt({node:e,prop:t});return Array.isArray(n)&&r?n:[n]}function Ot(e){if(!e.type)return null;const t=e.type[0].toUpperCase()+e.type.slice(1),r=t.replace(/Lunchbox$/,""),n=te[e.type]||Le[t]||te[r]||Le[r];if(!n)throw`${t} is not part of the THREE namespace! Did you forget to extend? import {extend} from 'lunchbox'; extend({app, YourComponent, ...})`;const i=(e.props.args??[]).map(p=>Dt({node:e,prop:p}));let c=[];return i.forEach(p=>{c=c.concat(p)}),new n(...c)}var W,Kt=new Uint8Array(16);function $t(){if(!W&&(W=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(Kt)}var Ut=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function zt(e){return typeof e=="string"&&Ut.test(e)}var E=[];for(var Q=0;Q<256;++Q)E.push((Q+256).toString(16).substr(1));function Ht(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(E[e[t+0]]+E[e[t+1]]+E[e[t+2]]+E[e[t+3]]+"-"+E[e[t+4]]+E[e[t+5]]+"-"+E[e[t+6]]+E[e[t+7]]+"-"+E[e[t+8]]+E[e[t+9]]+"-"+E[e[t+10]]+E[e[t+11]]+E[e[t+12]]+E[e[t+13]]+E[e[t+14]]+E[e[t+15]]).toLowerCase();if(!zt(r))throw TypeError("Stringified UUID is invalid");return r}function Wt(e,t,r){e=e||{};var n=e.random||(e.rng||$t)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Ht(n)}var G;(function(e){class t{constructor(a={},o){x(this,"uuid");x(this,"parentNode");x(this,"children",[]);x(this,"minidomType");this.parentNode=(a==null?void 0:a.parentNode)??o??null,this.minidomType="MinidomBaseNode",this.uuid=(a==null?void 0:a.uuid)??Wt()}get nextSibling(){if(!this.parentNode)return null;const a=this.parentNode.children.findIndex(o=>o.uuid===this.uuid);return a!==-1&&a<this.parentNode.children.length-1?this.parentNode.children[a+1]:null}insertBefore(a,o){a.removeAsChildFromAnyParents(),a.parentNode=this;const l=this.children.findIndex(h=>h.uuid===(o==null?void 0:o.uuid));l!==-1?this.children.splice(l,0,a):this.children.push(a)}removeChild(a){const o=this.children.findIndex(l=>(l==null?void 0:l.uuid)===(a==null?void 0:a.uuid));o!==-1&&this.children.splice(o,1)}addChild(a){return a&&(a.removeAsChildFromAnyParents(),a.parentNode=this,this.insertBefore(a,null)),this}getPath(){const a=[];let o=this;for(;o;)a.unshift(o),o=o.parentNode;return a}drop(){this.removeAsChildFromAnyParents(),this.parentNode=null}walk(a){const o=[this,...this.children],l=[];let h=!0;for(;o.length&&h;){const m=o.shift();if(m){if(l.includes(m))continue;l.push(m),o.push(...m.children.filter(b=>!l.includes(b))),h=a(m)}else h=!1}}removeAsChildFromAnyParents(){var a;(a=this.parentNode)==null||a.removeChild(this)}}e.BaseNode=t;class r extends e.BaseNode{constructor(o={},l){super(o,l);x(this,"eventListeners");x(this,"eventListenerRemoveFunctions");x(this,"name");x(this,"metaType");x(this,"props");x(this,"type");this.minidomType="RendererNode",this.eventListeners={},this.eventListenerRemoveFunctions={},this.name=o.name??"",this.metaType=o.metaType??"standardMeta",this.props=o.props??[],this.type=o.type??""}drop(){super.drop(),Object.keys(this.eventListenerRemoveFunctions).forEach(o=>{this.eventListenerRemoveFunctions[o].forEach(l=>l())})}}e.RendererBaseNode=r;class n extends e.RendererBaseNode{constructor(o={},l){super(o,l);x(this,"domElement");x(this,"isLunchboxRootNode",!0);this.domElement=o.domElement??document.createElement("div")}}e.RendererRootNode=n;class s extends e.RendererBaseNode{constructor(o={},l){super(o,l);x(this,"text");this.text=o.text??""}}e.RendererCommentNode=s;class i extends e.RendererBaseNode{constructor(o={},l){super(o,l);x(this,"domElement");this.domElement=o.domElement??document.createElement("div")}}e.RendererDomNode=i;class c extends e.RendererBaseNode{constructor(o={},l){super(o,l);x(this,"text");this.text=o.text??""}}e.RendererTextNode=c;class d extends e.RendererBaseNode{constructor(o={},l){super(o,l);x(this,"attached");x(this,"attachedArray");x(this,"instance");this.attached=o.attached??[],this.attachedArray=o.attachedArray??{},this.instance=o.instance??null}}e.RendererStandardNode=d})(G||(G={}));const Ue="lunchbox-globals",ze="lunchbox-updateGlobals",qt="lunchbox-setCustomRender",Vt="lunchbox-clearCustomRender",Xt="lunchbox-beforeRender",He="lunchbox-onBeforeRender",We="lunchbox-offBeforeRender",Yt="lunchbox-afterRender",Jt="lunchbox-onAfterRender",Qt="lunchbox-offAfterRender",qe="lunchbox-frameId",Ve="lunchbox-watchStopHandle",Zt="lunchbox-appRootNode",Xe="lunchbox-appKey",Ye="lunchbox-renderer",en="lunchbox-scene",Je="lunchbox-camera",Qe="lunchbox-interactables",Ze="lunchbox-startCallback",Fe=e=>{typeof e.app.config.globalProperties.lunchbox.frameId=="number"&&cancelAnimationFrame(e.app.config.globalProperties.lunchbox.frameId),e.app.config.globalProperties.lunchbox.frameId=requestAnimationFrame(()=>et({app:e.app,renderer:e.renderer,scene:e.scene,camera:e.camera,updateSource:e.updateSource}))},et=e=>{e.updateSource?e.app.config.globalProperties.lunchbox.watchStopHandle||(e.app.config.globalProperties.lunchbox.watchStopHandle=X(e.updateSource,()=>{Fe(e)},{deep:!0})):Fe(e);const{app:t,renderer:r,scene:n}=e;t.config.globalProperties.lunchbox.beforeRender.forEach(s=>{s==null||s(e)}),r&&n&&e.app.config.globalProperties.lunchbox.camera&&(t.customRender?t.customRender(e):r.render(Z(n),e.app.config.globalProperties.lunchbox.camera)),t.config.globalProperties.lunchbox.afterRender.forEach(s=>{s==null||s(e)})},tt=()=>({onBeforeRender:C(He),offBeforeRender:C(We)}),tn=(e,t=1/0)=>{var r,n;(n=(r=tt()).onBeforeRender)==null||n.call(r,e,t)},nn=e=>{var t,r;(r=(t=tt()).offBeforeRender)==null||r.call(t,e)},rn=()=>{const e=C(qe);return()=>{e!==void 0&&cancelAnimationFrame(e)}},sn=()=>{var e;(e=rn())==null||e()},an=()=>{const e=C(Ve);return()=>e==null?void 0:e()},on=()=>{var e;(e=an())==null||e()};function cn({node:e,key:t,interactables:r,value:n}){var a;if(vt(t))return Pt({node:e,key:t,interactables:r,value:n});const s=t.replace(/-/g,"."),i=ln[s]||s;if(Ge.includes(t)||Ge.includes(i)||!j(e))return e;if(typeof n=="string"&&n.startsWith("$attached")){const o=n.replace("$attached.","");n=J(e.attached,o,null)}const c=e.instance;if(!c)return e;let d;for(let o=0;o<_e.length&&!d;o++){const h=[_e[o],i].filter(Boolean).join(".");d=d=J(c,h)}if(d&&xt(n)&&(d!=null&&d.setScalar))d.setScalar(n);else if(d&&d.set){const o=Array.isArray(n)?n:[n];c[i].set(...o)}else if(typeof d=="function")if(i.toLowerCase()==="onbeforerender"||i.toLowerCase()==="onafterrender")c[i]=n;else{if(!Array.isArray(n))throw new Error(`Arguments on a declarative method must be wrapped in an array.
Works:
<example :methodCall="[256]" />
Doesn't work:
<example :methodCall="256" />`);d.bind(e.instance)(...n)}else J(c,i,void 0)!==void 0?Et(c,i,n===""?!0:n):console.log(`No property ${i} found on ${c}`);const p=((a=c==null?void 0:c.texture)==null?void 0:a.type)||(c==null?void 0:c.type);if(typeof p=="string"){const o=p.toLowerCase();switch(!0){case o.includes("material"):c.needsUpdate=!0;break;case(o.includes("camera")&&c.updateProjectionMatrix):c.updateProjectionMatrix();break}}return e}const ln={x:"position.x",y:"position.y",z:"position.z"},_e=["","parameters"],Ge=["args","attach","attachArray","is.default","isDefault","key","onAdded","ref","src"],un=["geometry","material"],dn=(e,t,r,n)=>{const s={type:e,props:n};if(V(s))return At(s);const c=Rt(s);return un.forEach(d=>{e.toLowerCase().endsWith(d)&&(c.props.attach=d)}),c},pn=(e,t,r)=>{var n,s,i,c,d,p,a;if(!t)throw new Error("missing parent");if(t.insertBefore(e,r),!(e.metaType==="commentMeta"||e.metaType==="textMeta")&&(V(e)&&(V(t)||se(t))&&t.domElement.appendChild(e.domElement),j(e))){let o=t.metaType;if(o==="textMeta"||o==="commentMeta"){const l=t.getPath();for(let h=l.length-1;h>=0;h--)if(l[h].metaType!=="textMeta"&&l[h].metaType!=="commentMeta"){t=l[h];break}}j(e)&&((n=e.instance)!=null&&n.isObject3D)&&j(t)&&((s=t.instance)!=null&&s.isObject3D)&&((c=(i=t.instance)==null?void 0:i.add)==null||c.call(i,e.instance)),(d=e==null?void 0:e.props)!=null&&d.attach&&j(t)&&(t!=null&&t.instance)&&(((p=e.type)==null?void 0:p.toLowerCase().endsWith("loader"))&&e.props.src&&(e.props.attach||e.props.attachArray)?hn(e,t):ne(e,t,e.props.attach)),(a=e.props)!=null&&a.onAdded&&e.props.onAdded({instance:e.instance})}};function hn(e,t){var n;const r=e.instance;if(t.attached=t.attached||{},t.attachedArray=t.attachedArray||{},!!e.props.attach)if(((n=e.type)==null?void 0:n.toLowerCase())==="textureloader"){const i=r.load(e.props.src);ne(e,t,e.props.attach,i)}else r.load(e.props.src,s=>{ne(e,t,e.props.attach,s)},null,s=>{throw new Error(s)})}function ne(e,t,r,n){const s=n??e.instance,i=t.instance;e.props.attach===r&&(t.attached={[r]:s,...t.attached||{}},i[r]=n??e.instance),e.props.attachArray===r&&(t.attachedArray[e.props.attachArray]||(t.attachedArray[e.props.attachArray]=[]),t.attachedArray[e.props.attachArray].push(s),i[r]=[i[r]])}const fn=e=>{if(!e)return;const t=[];e.walk(r=>(t.push(r),!0)),t.forEach(r=>{var n,s,i;if(j(r)){(s=(n=r.instance)==null?void 0:n.removeFromParent)==null||s.call(n);const c=r.type!=="scene"&&((i=r.instance)==null?void 0:i.dispose);c&&c.bind(r.instance)(),r.instance=null}r.drop()})},mn=()=>{const e=L([]);return{nodeOps:{createElement:dn,createText(r){return Ct({text:r})},createComment(r){return kt({text:r})},insert:pn,nextSibling(r){const n=r.nextSibling;return n||null},parentNode(r){const n=r.parentNode;return n||null},patchProp(r,n,s,i){if(V(r)){n==="style"?Object.keys(i).forEach(c=>{r.domElement.style[c]=i[c]}):r.domElement.setAttribute(n,i);return}se(r)||n.startsWith("$")||cn({node:r,key:n,interactables:e,value:i})},remove:fn,setElementText(){},setText(){}},interactables:e}},yn=I({name:"BridgeComponent",props:{app:{type:Object},root:{type:Object},appSetup:{type:Function,default:e=>e}},setup(e,t){var i;if(!e.app&&!e.root)throw new Error("app or root required as <bridge> prop");const r=L();let n=e.appSetup(e.app??at(e.root,t.attrs));const s=((i=ht())==null?void 0:i.provides)??{};return Object.keys(s).forEach(c=>{n==null||n.provide(c,C(c))}),Me(()=>{n==null||n.mount(r.value)}),ft(()=>{n==null||n.unmount(),n=null}),()=>v("div",{ref:r},null)}}),nt={install(e){e.component("lunchbox",yn)}},gn=()=>C(Je),je=()=>C(Ye),bn=e=>{const t=je();if(t.value){e(t.value);return}let r=null;r=X(je(),n=>{n&&(e(n),r==null||r())},{immediate:!0})},rt=()=>C(Ue),xn=()=>C(ze),En=()=>C(Xe),vn=()=>C(Ze),st=()=>C(Qe),at=(e,t={})=>{const{nodeOps:r,interactables:n}=mn(),s=pt(r).createApp(e,t);s.provide(Qe,n),Object.keys(Se).forEach(a=>{s==null||s.component(a,Se[a])}),s.provide(qt,a=>{s.setCustomRender(a)}),s.provide(Vt,()=>{s.clearCustomRender()});const i=[];s.provide(Xt,i),s.provide(He,(a,o=1/0)=>{o===1/0?i.push(a):i.splice(o,0,a)}),s.provide(We,a=>{if(isFinite(a))i.splice(a,1);else{const o=i.findIndex(l=>l==a);o!==-1&&i.splice(o,1)}});const c=[];s.provide(Yt,c),s.provide(Jt,(a,o=1/0)=>{o===1/0?c.push(a):c.splice(o,0,a)}),s.provide(Qt,a=>{if(isFinite(a))c.splice(a,1);else{const o=c.findIndex(l=>l==a);o!==-1&&c.splice(o,1)}}),s.config.globalProperties.lunchbox=Ie({afterRender:c,beforeRender:i,camera:null,dpr:1,frameId:-1,renderer:null,scene:null,watchStopHandle:null}),s.provide(Ue,s.config.globalProperties.lunchbox),s.provide(ze,a=>{Object.keys(a).forEach(o=>{const l=o;s.config.globalProperties.lunchbox[l]=a[l]})}),s.provide(qe,s.config.globalProperties.lunchbox.frameId),s.provide(Ve,s.config.globalProperties.lunchbox.watchStopHandle);const{mount:d}=s;s.mount=(a,...o)=>{const l=typeof a=="string"?document.querySelector(a):a,h=new G.RendererRootNode({domElement:l,isLunchboxRootNode:!0,name:"root",metaType:"rootMeta",type:"root",uuid:"LUNCHBOX_ROOT"});return s.rootNode=h,s.provide(Zt,h),d(h,...o)},s.extend=a=>(It({app:s,...a}),s);const p=[];return s.provide(Ze,p),s.setCustomRender=a=>{s&&(s.customRender=a)},s.clearCustomRender=()=>{s&&(s.customRender=null)},s.provide(Xe,s),s.provide(Ye,q(()=>s.config.globalProperties.lunchbox.renderer)),s.provide(en,q(()=>s.config.globalProperties.lunchbox.scene)),s.provide(Je,q(()=>s.config.globalProperties.lunchbox.camera)),s._props,s},kn={__name:"LunchboxApp",setup(e){return(t,r)=>{const n=_("boxGeometry"),s=_("MeshBasicMaterial");return re(),Ke(ee(nt),null,{default:mt(()=>[z("mesh",null,[v(n),v(s,{color:"red"})])]),_:1})}}},An={__name:"地球",setup(e){const t=at(kn);return(r,n)=>(re(),Ke(ee(nt),{app:ee(t)},null,8,["app"]))}},Cn=z("h1",{id:"地球",tabindex:"-1"},[$e("地球 "),z("a",{class:"header-anchor",href:"#地球","aria-label":'Permalink to "地球"'},"​")],-1),Rn=z("h2",{id:"效果展示",tabindex:"-1"},[$e("效果展示 "),z("a",{class:"header-anchor",href:"#效果展示","aria-label":'Permalink to "效果展示"'},"​")],-1),Pn=gt(`<h2 id="示例代码" tabindex="-1">示例代码 <a class="header-anchor" href="#示例代码" aria-label="Permalink to &quot;示例代码&quot;">​</a></h2><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">lunchbox</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lunchboxApp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createApp, lunchbox  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lunchboxjs&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LunchboxApp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./LunchboxApp.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lunchboxApp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LunchboxApp)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// you can add plugins, etc here - for example:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lunchboxApp.use(myPlugin)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lunchboxApp.component(myComponent)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lunchboxApp.provide(myProvide)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p><a href="https://blog.csdn.net/ImagineCode/article/details/126072638" target="_blank" rel="noreferrer">用 Lunchbox 在 vue3 中创建一个旋转的 3D 地球竟是如此简单</a></p>`,4),Tn=JSON.parse('{"title":"地球","description":"","frontmatter":{},"headers":[],"relativePath":"js/threejs/demos/地球.md","filePath":"js/threejs/demos/地球.md","lastUpdated":1722500431000}'),wn={name:"js/threejs/demos/地球.md"},Sn=Object.assign(wn,{setup(e){return(t,r)=>(re(),yt("div",null,[Cn,Rn,v(An),Pn]))}});export{Tn as __pageData,Sn as default};
