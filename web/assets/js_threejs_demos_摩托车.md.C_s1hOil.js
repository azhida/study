import{_ as Ti,y as Di,o as qs,c as Xs,I as Bi,j as as,a as zs,a5 as bi}from"./chunks/framework.x0IMHZ_J.js";import{E as Ri,V as L,M as Y,b as W,Q as hs,S as Ns,c as N,d as xi,e as fs,f as Ys,L as wi,g as ms,F as Ws,a as V,h as Zs,P as Li,D as Qs,i as is,j as es,k as _,I as Mi,O as Js,l as _i,m as Si,B as cs,n as Ni,o as $s,p as si,q as Fs,r as Ii,t as ds,u as Oi,v as ii,w as ei,x as Pi,y as Hi,z as ji,G as ti,H as vi,J as Gi,K as Ui,N as Ki,U as Es,W as ni,X as Vi,Y as qi,Z as Xi,_ as ai,$ as zi,a0 as Yi,a1 as ls,a2 as Wi,a3 as Zi,a4 as Qi,a5 as Ji,a6 as $i,a7 as se,a8 as ie,a9 as ee,aa as te,ab as Is,ac as ne,ad as Os,ae,af as he,ag as le,ah as re,ai as pe,aj as oe,ak as ke,al as ce,am as de}from"./chunks/three.module.DEIqzEw6.js";const Ps={type:"change"},gs={type:"start"},Hs={type:"end"};class Ee extends Ri{constructor(e,i){super(),this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new L,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Y.ROTATE,MIDDLE:Y.DOLLY,RIGHT:Y.PAN},this.touches={ONE:W.ROTATE,TWO:W.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(o){o.addEventListener("keydown",os),this._domElementKeyEvents=o},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",os),this._domElementKeyEvents=null},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(Ps),s.update(),n=t.NONE},this.update=function(){const o=new L,u=new hs().setFromUnitVectors(e.up,new L(0,1,0)),B=u.clone().invert(),R=new L,P=new hs,z=2*Math.PI;return function(){const Ss=s.object.position;o.copy(Ss).sub(s.target),o.applyQuaternion(u),l.setFromVector3(o),s.autoRotate&&n===t.NONE&&S(w()),s.enableDamping?(l.theta+=h.theta*s.dampingFactor,l.phi+=h.phi*s.dampingFactor):(l.theta+=h.theta,l.phi+=h.phi);let j=s.minAzimuthAngle,v=s.maxAzimuthAngle;return isFinite(j)&&isFinite(v)&&(j<-Math.PI?j+=z:j>Math.PI&&(j-=z),v<-Math.PI?v+=z:v>Math.PI&&(v-=z),j<=v?l.theta=Math.max(j,Math.min(v,l.theta)):l.theta=l.theta>(j+v)/2?Math.max(j,l.theta):Math.min(v,l.theta)),l.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=r,l.radius=Math.max(s.minDistance,Math.min(s.maxDistance,l.radius)),s.enableDamping===!0?s.target.addScaledVector(p,s.dampingFactor):s.target.add(p),o.setFromSpherical(l),o.applyQuaternion(B),Ss.copy(s.target).add(o),s.object.lookAt(s.target),s.enableDamping===!0?(h.theta*=1-s.dampingFactor,h.phi*=1-s.dampingFactor,p.multiplyScalar(1-s.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),r=1,k||R.distanceToSquared(s.object.position)>a||8*(1-P.dot(s.object.quaternion))>a?(s.dispatchEvent(Ps),R.copy(s.object.position),P.copy(s.object.quaternion),k=!1,!0):!1}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",Ms),s.domElement.removeEventListener("pointerdown",ws),s.domElement.removeEventListener("pointercancel",J),s.domElement.removeEventListener("wheel",Ls),s.domElement.removeEventListener("pointermove",ps),s.domElement.removeEventListener("pointerup",J),s._domElementKeyEvents!==null&&(s._domElementKeyEvents.removeEventListener("keydown",os),s._domElementKeyEvents=null)};const s=this,t={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let n=t.NONE;const a=1e-6,l=new Ns,h=new Ns;let r=1;const p=new L;let k=!1;const c=new N,E=new N,g=new N,F=new N,y=new N,f=new N,D=new N,T=new N,C=new N,m=[],x={};function w(){return 2*Math.PI/60/60*s.autoRotateSpeed}function M(){return Math.pow(.95,s.zoomSpeed)}function S(o){h.theta-=o}function X(o){h.phi-=o}const q=function(){const o=new L;return function(B,R){o.setFromMatrixColumn(R,0),o.multiplyScalar(-B),p.add(o)}}(),H=function(){const o=new L;return function(B,R){s.screenSpacePanning===!0?o.setFromMatrixColumn(R,1):(o.setFromMatrixColumn(R,0),o.crossVectors(s.object.up,o)),o.multiplyScalar(B),p.add(o)}}(),b=function(){const o=new L;return function(B,R){const P=s.domElement;if(s.object.isPerspectiveCamera){const z=s.object.position;o.copy(z).sub(s.target);let ns=o.length();ns*=Math.tan(s.object.fov/2*Math.PI/180),q(2*B*ns/P.clientHeight,s.object.matrix),H(2*R*ns/P.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(q(B*(s.object.right-s.object.left)/s.object.zoom/P.clientWidth,s.object.matrix),H(R*(s.object.top-s.object.bottom)/s.object.zoom/P.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function G(o){s.object.isPerspectiveCamera?r/=o:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*o)),s.object.updateProjectionMatrix(),k=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function O(o){s.object.isPerspectiveCamera?r*=o:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/o)),s.object.updateProjectionMatrix(),k=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function Q(o){c.set(o.clientX,o.clientY)}function rs(o){D.set(o.clientX,o.clientY)}function ts(o){F.set(o.clientX,o.clientY)}function ri(o){E.set(o.clientX,o.clientY),g.subVectors(E,c).multiplyScalar(s.rotateSpeed);const u=s.domElement;S(2*Math.PI*g.x/u.clientHeight),X(2*Math.PI*g.y/u.clientHeight),c.copy(E),s.update()}function pi(o){T.set(o.clientX,o.clientY),C.subVectors(T,D),C.y>0?G(M()):C.y<0&&O(M()),D.copy(T),s.update()}function oi(o){y.set(o.clientX,o.clientY),f.subVectors(y,F).multiplyScalar(s.panSpeed),b(f.x,f.y),F.copy(y),s.update()}function ki(o){o.deltaY<0?O(M()):o.deltaY>0&&G(M()),s.update()}function ci(o){let u=!1;switch(o.code){case s.keys.UP:o.ctrlKey||o.metaKey||o.shiftKey?X(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):b(0,s.keyPanSpeed),u=!0;break;case s.keys.BOTTOM:o.ctrlKey||o.metaKey||o.shiftKey?X(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):b(0,-s.keyPanSpeed),u=!0;break;case s.keys.LEFT:o.ctrlKey||o.metaKey||o.shiftKey?S(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):b(s.keyPanSpeed,0),u=!0;break;case s.keys.RIGHT:o.ctrlKey||o.metaKey||o.shiftKey?S(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):b(-s.keyPanSpeed,0),u=!0;break}u&&(o.preventDefault(),s.update())}function Ts(){if(m.length===1)c.set(m[0].pageX,m[0].pageY);else{const o=.5*(m[0].pageX+m[1].pageX),u=.5*(m[0].pageY+m[1].pageY);c.set(o,u)}}function Ds(){if(m.length===1)F.set(m[0].pageX,m[0].pageY);else{const o=.5*(m[0].pageX+m[1].pageX),u=.5*(m[0].pageY+m[1].pageY);F.set(o,u)}}function Bs(){const o=m[0].pageX-m[1].pageX,u=m[0].pageY-m[1].pageY,B=Math.sqrt(o*o+u*u);D.set(0,B)}function di(){s.enableZoom&&Bs(),s.enablePan&&Ds()}function Ei(){s.enableZoom&&Bs(),s.enableRotate&&Ts()}function bs(o){if(m.length==1)E.set(o.pageX,o.pageY);else{const B=ks(o),R=.5*(o.pageX+B.x),P=.5*(o.pageY+B.y);E.set(R,P)}g.subVectors(E,c).multiplyScalar(s.rotateSpeed);const u=s.domElement;S(2*Math.PI*g.x/u.clientHeight),X(2*Math.PI*g.y/u.clientHeight),c.copy(E)}function Rs(o){if(m.length===1)y.set(o.pageX,o.pageY);else{const u=ks(o),B=.5*(o.pageX+u.x),R=.5*(o.pageY+u.y);y.set(B,R)}f.subVectors(y,F).multiplyScalar(s.panSpeed),b(f.x,f.y),F.copy(y)}function xs(o){const u=ks(o),B=o.pageX-u.x,R=o.pageY-u.y,P=Math.sqrt(B*B+R*R);T.set(0,P),C.set(0,Math.pow(T.y/D.y,s.zoomSpeed)),G(C.y),D.copy(T)}function gi(o){s.enableZoom&&xs(o),s.enablePan&&Rs(o)}function ui(o){s.enableZoom&&xs(o),s.enableRotate&&bs(o)}function ws(o){s.enabled!==!1&&(m.length===0&&(s.domElement.setPointerCapture(o.pointerId),s.domElement.addEventListener("pointermove",ps),s.domElement.addEventListener("pointerup",J)),Ai(o),o.pointerType==="touch"?mi(o):yi(o))}function ps(o){s.enabled!==!1&&(o.pointerType==="touch"?Fi(o):fi(o))}function J(o){Ci(o),m.length===0&&(s.domElement.releasePointerCapture(o.pointerId),s.domElement.removeEventListener("pointermove",ps),s.domElement.removeEventListener("pointerup",J)),s.dispatchEvent(Hs),n=t.NONE}function yi(o){let u;switch(o.button){case 0:u=s.mouseButtons.LEFT;break;case 1:u=s.mouseButtons.MIDDLE;break;case 2:u=s.mouseButtons.RIGHT;break;default:u=-1}switch(u){case Y.DOLLY:if(s.enableZoom===!1)return;rs(o),n=t.DOLLY;break;case Y.ROTATE:if(o.ctrlKey||o.metaKey||o.shiftKey){if(s.enablePan===!1)return;ts(o),n=t.PAN}else{if(s.enableRotate===!1)return;Q(o),n=t.ROTATE}break;case Y.PAN:if(o.ctrlKey||o.metaKey||o.shiftKey){if(s.enableRotate===!1)return;Q(o),n=t.ROTATE}else{if(s.enablePan===!1)return;ts(o),n=t.PAN}break;default:n=t.NONE}n!==t.NONE&&s.dispatchEvent(gs)}function fi(o){switch(n){case t.ROTATE:if(s.enableRotate===!1)return;ri(o);break;case t.DOLLY:if(s.enableZoom===!1)return;pi(o);break;case t.PAN:if(s.enablePan===!1)return;oi(o);break}}function Ls(o){s.enabled===!1||s.enableZoom===!1||n!==t.NONE||(o.preventDefault(),s.dispatchEvent(gs),ki(o),s.dispatchEvent(Hs))}function os(o){s.enabled===!1||s.enablePan===!1||ci(o)}function mi(o){switch(_s(o),m.length){case 1:switch(s.touches.ONE){case W.ROTATE:if(s.enableRotate===!1)return;Ts(),n=t.TOUCH_ROTATE;break;case W.PAN:if(s.enablePan===!1)return;Ds(),n=t.TOUCH_PAN;break;default:n=t.NONE}break;case 2:switch(s.touches.TWO){case W.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;di(),n=t.TOUCH_DOLLY_PAN;break;case W.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;Ei(),n=t.TOUCH_DOLLY_ROTATE;break;default:n=t.NONE}break;default:n=t.NONE}n!==t.NONE&&s.dispatchEvent(gs)}function Fi(o){switch(_s(o),n){case t.TOUCH_ROTATE:if(s.enableRotate===!1)return;bs(o),s.update();break;case t.TOUCH_PAN:if(s.enablePan===!1)return;Rs(o),s.update();break;case t.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;gi(o),s.update();break;case t.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;ui(o),s.update();break;default:n=t.NONE}}function Ms(o){s.enabled!==!1&&o.preventDefault()}function Ai(o){m.push(o)}function Ci(o){delete x[o.pointerId];for(let u=0;u<m.length;u++)if(m[u].pointerId==o.pointerId){m.splice(u,1);return}}function _s(o){let u=x[o.pointerId];u===void 0&&(u=new N,x[o.pointerId]=u),u.set(o.pageX,o.pageY)}function ks(o){const u=o.pointerId===m[0].pointerId?m[1]:m[0];return x[u.pointerId]}s.domElement.addEventListener("contextmenu",Ms),s.domElement.addEventListener("pointerdown",ws),s.domElement.addEventListener("pointercancel",J),s.domElement.addEventListener("wheel",Ls,{passive:!1}),this.update()}}function js(d,e){if(e===xi)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),d;if(e===fs||e===Ys){let i=d.getIndex();if(i===null){const a=[],l=d.getAttribute("position");if(l!==void 0){for(let h=0;h<l.count;h++)a.push(h);d.setIndex(a),i=d.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),d}const s=i.count-2,t=[];if(e===fs)for(let a=1;a<=s;a++)t.push(i.getX(0)),t.push(i.getX(a)),t.push(i.getX(a+1));else for(let a=0;a<s;a++)a%2===0?(t.push(i.getX(a)),t.push(i.getX(a+1)),t.push(i.getX(a+2))):(t.push(i.getX(a+2)),t.push(i.getX(a+1)),t.push(i.getX(a)));t.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const n=d.clone();return n.setIndex(t),n.clearGroups(),n}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),d}class ge extends wi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new Fe(i)}),this.register(function(i){return new Re(i)}),this.register(function(i){return new xe(i)}),this.register(function(i){return new we(i)}),this.register(function(i){return new Ce(i)}),this.register(function(i){return new Te(i)}),this.register(function(i){return new De(i)}),this.register(function(i){return new Be(i)}),this.register(function(i){return new me(i)}),this.register(function(i){return new be(i)}),this.register(function(i){return new Ae(i)}),this.register(function(i){return new ye(i)}),this.register(function(i){return new Le(i)}),this.register(function(i){return new Me(i)})}load(e,i,s,t){const n=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=ms.extractUrlBase(e),this.manager.itemStart(e);const l=function(r){t?t(r):console.error(r),n.manager.itemError(e),n.manager.itemEnd(e)},h=new Ws(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(r){try{n.parse(r,a,function(p){i(p),n.manager.itemEnd(e)},l)}catch(p){l(p)}},s,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,i,s,t){let n;const a={},l={},h=new TextDecoder;if(typeof e=="string")n=JSON.parse(e);else if(e instanceof ArrayBuffer)if(h.decode(new Uint8Array(e,0,4))===hi){try{a[A.KHR_BINARY_GLTF]=new _e(e)}catch(k){t&&t(k);return}n=JSON.parse(a[A.KHR_BINARY_GLTF].content)}else n=JSON.parse(h.decode(e));else n=e;if(n.asset===void 0||n.asset.version[0]<2){t&&t(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const r=new qe(n,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});r.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const k=this.pluginCallbacks[p](r);l[k.name]=k,a[k.name]=!0}if(n.extensionsUsed)for(let p=0;p<n.extensionsUsed.length;++p){const k=n.extensionsUsed[p],c=n.extensionsRequired||[];switch(k){case A.KHR_MATERIALS_UNLIT:a[k]=new fe;break;case A.KHR_DRACO_MESH_COMPRESSION:a[k]=new Se(n,this.dracoLoader);break;case A.KHR_TEXTURE_TRANSFORM:a[k]=new Ne;break;case A.KHR_MESH_QUANTIZATION:a[k]=new Ie;break;default:c.indexOf(k)>=0&&l[k]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+k+'".')}}r.setExtensions(a),r.setPlugins(l),r.parse(s,t)}parseAsync(e,i){const s=this;return new Promise(function(t,n){s.parse(e,i,t,n)})}}function ue(){let d={};return{get:function(e){return d[e]},add:function(e,i){d[e]=i},remove:function(e){delete d[e]},removeAll:function(){d={}}}}const A={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ye{constructor(e){this.parser=e,this.name=A.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,i=this.parser.json.nodes||[];for(let s=0,t=i.length;s<t;s++){const n=i[s];n.extensions&&n.extensions[this.name]&&n.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const i=this.parser,s="light:"+e;let t=i.cache.get(s);if(t)return t;const n=i.json,h=((n.extensions&&n.extensions[this.name]||{}).lights||[])[e];let r;const p=new V(16777215);h.color!==void 0&&p.fromArray(h.color);const k=h.range!==void 0?h.range:0;switch(h.type){case"directional":r=new Qs(p),r.target.position.set(0,0,-1),r.add(r.target);break;case"point":r=new Li(p),r.distance=k;break;case"spot":r=new Zs(p),r.distance=k,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,r.angle=h.spot.outerConeAngle,r.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return r.position.set(0,0,0),r.decay=2,K(r,h),h.intensity!==void 0&&(r.intensity=h.intensity),r.name=i.createUniqueName(h.name||"light_"+e),t=Promise.resolve(r),i.cache.add(s,t),t}getDependency(e,i){if(e==="light")return this._loadLight(i)}createNodeAttachment(e){const i=this,s=this.parser,n=s.json.nodes[e],l=(n.extensions&&n.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(h){return s._getNodeRef(i.cache,l,h)})}}class fe{constructor(){this.name=A.KHR_MATERIALS_UNLIT}getMaterialType(){return is}extendParams(e,i,s){const t=[];e.color=new V(1,1,1),e.opacity=1;const n=i.pbrMetallicRoughness;if(n){if(Array.isArray(n.baseColorFactor)){const a=n.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}n.baseColorTexture!==void 0&&t.push(s.assignTexture(e,"map",n.baseColorTexture,es))}return Promise.all(t)}}class me{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,i){const t=this.parser.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=t.extensions[this.name].emissiveStrength;return n!==void 0&&(i.emissiveIntensity=n),Promise.resolve()}}class Fe{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:_}extendMaterialParams(e,i){const s=this.parser,t=s.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=[],a=t.extensions[this.name];if(a.clearcoatFactor!==void 0&&(i.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&n.push(s.assignTexture(i,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&n.push(s.assignTexture(i,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(n.push(s.assignTexture(i,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new N(l,l)}return Promise.all(n)}}class Ae{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:_}extendMaterialParams(e,i){const s=this.parser,t=s.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=[],a=t.extensions[this.name];return a.iridescenceFactor!==void 0&&(i.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&n.push(s.assignTexture(i,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(i.iridescenceIOR=a.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&n.push(s.assignTexture(i,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(n)}}class Ce{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_SHEEN}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:_}extendMaterialParams(e,i){const s=this.parser,t=s.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=[];i.sheenColor=new V(0,0,0),i.sheenRoughness=0,i.sheen=1;const a=t.extensions[this.name];return a.sheenColorFactor!==void 0&&i.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&n.push(s.assignTexture(i,"sheenColorMap",a.sheenColorTexture,es)),a.sheenRoughnessTexture!==void 0&&n.push(s.assignTexture(i,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(n)}}class Te{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:_}extendMaterialParams(e,i){const s=this.parser,t=s.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=[],a=t.extensions[this.name];return a.transmissionFactor!==void 0&&(i.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&n.push(s.assignTexture(i,"transmissionMap",a.transmissionTexture)),Promise.all(n)}}class De{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_VOLUME}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:_}extendMaterialParams(e,i){const s=this.parser,t=s.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=[],a=t.extensions[this.name];i.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&n.push(s.assignTexture(i,"thicknessMap",a.thicknessTexture)),i.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return i.attenuationColor=new V(l[0],l[1],l[2]),Promise.all(n)}}class Be{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_IOR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:_}extendMaterialParams(e,i){const t=this.parser.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=t.extensions[this.name];return i.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}}class be{constructor(e){this.parser=e,this.name=A.KHR_MATERIALS_SPECULAR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:_}extendMaterialParams(e,i){const s=this.parser,t=s.json.materials[e];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=[],a=t.extensions[this.name];i.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&n.push(s.assignTexture(i,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return i.specularColor=new V(l[0],l[1],l[2]),a.specularColorTexture!==void 0&&n.push(s.assignTexture(i,"specularColorMap",a.specularColorTexture,es)),Promise.all(n)}}class Re{constructor(e){this.parser=e,this.name=A.KHR_TEXTURE_BASISU}loadTexture(e){const i=this.parser,s=i.json,t=s.textures[e];if(!t.extensions||!t.extensions[this.name])return null;const n=t.extensions[this.name],a=i.options.ktx2Loader;if(!a){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(e,n.source,a)}}class xe{constructor(e){this.parser=e,this.name=A.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const i=this.name,s=this.parser,t=s.json,n=t.textures[e];if(!n.extensions||!n.extensions[i])return null;const a=n.extensions[i],l=t.images[a.source];let h=s.textureLoader;if(l.uri){const r=s.options.manager.getHandler(l.uri);r!==null&&(h=r)}return this.detectSupport().then(function(r){if(r)return s.loadTextureImage(e,a.source,h);if(t.extensionsRequired&&t.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}}class we{constructor(e){this.parser=e,this.name=A.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const i=this.name,s=this.parser,t=s.json,n=t.textures[e];if(!n.extensions||!n.extensions[i])return null;const a=n.extensions[i],l=t.images[a.source];let h=s.textureLoader;if(l.uri){const r=s.options.manager.getHandler(l.uri);r!==null&&(h=r)}return this.detectSupport().then(function(r){if(r)return s.loadTextureImage(e,a.source,h);if(t.extensionsRequired&&t.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const i=new Image;i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}}class Le{constructor(e){this.name=A.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const i=this.parser.json,s=i.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const t=s.extensions[this.name],n=this.parser.getDependency("buffer",t.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then(function(l){const h=t.byteOffset||0,r=t.byteLength||0,p=t.count,k=t.byteStride,c=new Uint8Array(l,h,r);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(p,k,c,t.mode,t.filter).then(function(E){return E.buffer}):a.ready.then(function(){const E=new ArrayBuffer(p*k);return a.decodeGltfBuffer(new Uint8Array(E),p,k,c,t.mode,t.filter),E})})}else return null}}class Me{constructor(e){this.name=A.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const i=this.parser.json,s=i.nodes[e];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const t=i.meshes[s.mesh];for(const r of t.primitives)if(r.mode!==I.TRIANGLES&&r.mode!==I.TRIANGLE_STRIP&&r.mode!==I.TRIANGLE_FAN&&r.mode!==void 0)return null;const a=s.extensions[this.name].attributes,l=[],h={};for(const r in a)l.push(this.parser.getDependency("accessor",a[r]).then(p=>(h[r]=p,h[r])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(r=>{const p=r.pop(),k=p.isGroup?p.children:[p],c=r[0].count,E=[];for(const g of k){const F=new ls,y=new L,f=new hs,D=new L(1,1,1),T=new Mi(g.geometry,g.material,c);for(let C=0;C<c;C++)h.TRANSLATION&&y.fromBufferAttribute(h.TRANSLATION,C),h.ROTATION&&f.fromBufferAttribute(h.ROTATION,C),h.SCALE&&D.fromBufferAttribute(h.SCALE,C),T.setMatrixAt(C,F.compose(y,f,D));for(const C in h)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&g.geometry.setAttribute(C,h[C]);Js.prototype.copy.call(T,g),this.parser.assignFinalMaterial(T),E.push(T)}return p.isGroup?(p.clear(),p.add(...E),p):E[0]}))}}const hi="glTF",$=12,vs={JSON:1313821514,BIN:5130562};class _e{constructor(e){this.name=A.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(e,0,$),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(e.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==hi)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-$,n=new DataView(e,$);let a=0;for(;a<t;){const l=n.getUint32(a,!0);a+=4;const h=n.getUint32(a,!0);if(a+=4,h===vs.JSON){const r=new Uint8Array(e,$+a,l);this.content=s.decode(r)}else if(h===vs.BIN){const r=$+a;this.body=e.slice(r,r+l)}a+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Se{constructor(e,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=A.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(e,i){const s=this.json,t=this.dracoLoader,n=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},h={},r={};for(const p in a){const k=As[p]||p.toLowerCase();l[k]=a[p]}for(const p in e.attributes){const k=As[p]||p.toLowerCase();if(a[p]!==void 0){const c=s.accessors[e.attributes[p]],E=Z[c.componentType];r[k]=E.name,h[k]=c.normalized===!0}}return i.getDependency("bufferView",n).then(function(p){return new Promise(function(k){t.decodeDracoFile(p,function(c){for(const E in c.attributes){const g=c.attributes[E],F=h[E];F!==void 0&&(g.normalized=F)}k(c)},l,r)})})}}class Ne{constructor(){this.name=A.KHR_TEXTURE_TRANSFORM}extendTexture(e,i){return(i.texCoord===void 0||i.texCoord===e.channel)&&i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(e=e.clone(),i.texCoord!==void 0&&(e.channel=i.texCoord),i.offset!==void 0&&e.offset.fromArray(i.offset),i.rotation!==void 0&&(e.rotation=i.rotation),i.scale!==void 0&&e.repeat.fromArray(i.scale),e.needsUpdate=!0),e}}class Ie{constructor(){this.name=A.KHR_MESH_QUANTIZATION}}class li extends re{constructor(e,i,s,t){super(e,i,s,t)}copySampleValue_(e){const i=this.resultBuffer,s=this.sampleValues,t=this.valueSize,n=e*t*3+t;for(let a=0;a!==t;a++)i[a]=s[n+a];return i}interpolate_(e,i,s,t){const n=this.resultBuffer,a=this.sampleValues,l=this.valueSize,h=l*2,r=l*3,p=t-i,k=(s-i)/p,c=k*k,E=c*k,g=e*r,F=g-r,y=-2*E+3*c,f=E-c,D=1-y,T=f-c+k;for(let C=0;C!==l;C++){const m=a[F+C+l],x=a[F+C+h]*p,w=a[g+C+l],M=a[g+C]*p;n[C]=D*m+T*x+y*w+f*M}return n}}const Oe=new hs;class Pe extends li{interpolate_(e,i,s,t){const n=super.interpolate_(e,i,s,t);return Oe.fromArray(n).normalize().toArray(n),n}}const I={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Z={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Gs={9728:Wi,9729:$s,9984:Zi,9985:Qi,9986:Ji,9987:si},Us={33071:$i,33648:se,10497:Fs},us={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},As={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},U={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},He={CUBICSPLINE:void 0,LINEAR:ai,STEP:ie},ys={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function je(d){return d.DefaultMaterial===void 0&&(d.DefaultMaterial=new ii({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ee})),d.DefaultMaterial}function ss(d,e,i){for(const s in i.extensions)d[s]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=i.extensions[s])}function K(d,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(d.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ve(d,e,i){let s=!1,t=!1,n=!1;for(let r=0,p=e.length;r<p;r++){const k=e[r];if(k.POSITION!==void 0&&(s=!0),k.NORMAL!==void 0&&(t=!0),k.COLOR_0!==void 0&&(n=!0),s&&t&&n)break}if(!s&&!t&&!n)return Promise.resolve(d);const a=[],l=[],h=[];for(let r=0,p=e.length;r<p;r++){const k=e[r];if(s){const c=k.POSITION!==void 0?i.getDependency("accessor",k.POSITION):d.attributes.position;a.push(c)}if(t){const c=k.NORMAL!==void 0?i.getDependency("accessor",k.NORMAL):d.attributes.normal;l.push(c)}if(n){const c=k.COLOR_0!==void 0?i.getDependency("accessor",k.COLOR_0):d.attributes.color;h.push(c)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(h)]).then(function(r){const p=r[0],k=r[1],c=r[2];return s&&(d.morphAttributes.position=p),t&&(d.morphAttributes.normal=k),n&&(d.morphAttributes.color=c),d.morphTargetsRelative=!0,d})}function Ge(d,e){if(d.updateMorphTargets(),e.weights!==void 0)for(let i=0,s=e.weights.length;i<s;i++)d.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){const i=e.extras.targetNames;if(d.morphTargetInfluences.length===i.length){d.morphTargetDictionary={};for(let s=0,t=i.length;s<t;s++)d.morphTargetDictionary[i[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ue(d){const e=d.extensions&&d.extensions[A.KHR_DRACO_MESH_COMPRESSION];let i;return e?i="draco:"+e.bufferView+":"+e.indices+":"+Ks(e.attributes):i=d.indices+":"+Ks(d.attributes)+":"+d.mode,i}function Ks(d){let e="";const i=Object.keys(d).sort();for(let s=0,t=i.length;s<t;s++)e+=i[s]+":"+d[i[s]]+";";return e}function Cs(d){switch(d){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ke(d){return d.search(/\.jpe?g($|\?)/i)>0||d.search(/^data\:image\/jpeg/)===0?"image/jpeg":d.search(/\.webp($|\?)/i)>0||d.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Ve=new ls;class qe{constructor(e={},i={}){this.json=e,this.extensions={},this.plugins={},this.options=i,this.cache=new ue,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,t=!1,n=-1;typeof navigator<"u"&&(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,t=navigator.userAgent.indexOf("Firefox")>-1,n=t?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||s||t&&n<98?this.textureLoader=new _i(this.options.manager):this.textureLoader=new Si(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ws(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,i){const s=this,t=this.json,n=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(a){const l={scene:a[0][t.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:t.asset,parser:s,userData:{}};ss(n,l,t),K(l,t),Promise.all(s._invokeAll(function(h){return h.afterRoot&&h.afterRoot(l)})).then(function(){e(l)})}).catch(i)}_markDefs(){const e=this.json.nodes||[],i=this.json.skins||[],s=this.json.meshes||[];for(let t=0,n=i.length;t<n;t++){const a=i[t].joints;for(let l=0,h=a.length;l<h;l++)e[a[l]].isBone=!0}for(let t=0,n=e.length;t<n;t++){const a=e[t];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(s[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,i){i!==void 0&&(e.refs[i]===void 0&&(e.refs[i]=e.uses[i]=0),e.refs[i]++)}_getNodeRef(e,i,s){if(e.refs[i]<=1)return s;const t=s.clone(),n=(a,l)=>{const h=this.associations.get(a);h!=null&&this.associations.set(l,h);for(const[r,p]of a.children.entries())n(p,l.children[r])};return n(s,t),t.name+="_instance_"+e.uses[i]++,t}_invokeOne(e){const i=Object.values(this.plugins);i.push(this);for(let s=0;s<i.length;s++){const t=e(i[s]);if(t)return t}return null}_invokeAll(e){const i=Object.values(this.plugins);i.unshift(this);const s=[];for(let t=0;t<i.length;t++){const n=e(i[t]);n&&s.push(n)}return s}getDependency(e,i){const s=e+":"+i;let t=this.cache.get(s);if(!t){switch(e){case"scene":t=this.loadScene(i);break;case"node":t=this._invokeOne(function(n){return n.loadNode&&n.loadNode(i)});break;case"mesh":t=this._invokeOne(function(n){return n.loadMesh&&n.loadMesh(i)});break;case"accessor":t=this.loadAccessor(i);break;case"bufferView":t=this._invokeOne(function(n){return n.loadBufferView&&n.loadBufferView(i)});break;case"buffer":t=this.loadBuffer(i);break;case"material":t=this._invokeOne(function(n){return n.loadMaterial&&n.loadMaterial(i)});break;case"texture":t=this._invokeOne(function(n){return n.loadTexture&&n.loadTexture(i)});break;case"skin":t=this.loadSkin(i);break;case"animation":t=this._invokeOne(function(n){return n.loadAnimation&&n.loadAnimation(i)});break;case"camera":t=this.loadCamera(i);break;default:if(t=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,i)}),!t)throw new Error("Unknown type: "+e);break}this.cache.add(s,t)}return t}getDependencies(e){let i=this.cache.get(e);if(!i){const s=this,t=this.json[e+(e==="mesh"?"es":"s")]||[];i=Promise.all(t.map(function(n,a){return s.getDependency(e,a)})),this.cache.add(e,i)}return i}loadBuffer(e){const i=this.json.buffers[e],s=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&e===0)return Promise.resolve(this.extensions[A.KHR_BINARY_GLTF].body);const t=this.options;return new Promise(function(n,a){s.load(ms.resolveURL(i.uri,t.path),n,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(e){const i=this.json.bufferViews[e];return this.getDependency("buffer",i.buffer).then(function(s){const t=i.byteLength||0,n=i.byteOffset||0;return s.slice(n,n+t)})}loadAccessor(e){const i=this,s=this.json,t=this.json.accessors[e];if(t.bufferView===void 0&&t.sparse===void 0){const a=us[t.type],l=Z[t.componentType],h=t.normalized===!0,r=new l(t.count*a);return Promise.resolve(new cs(r,a,h))}const n=[];return t.bufferView!==void 0?n.push(this.getDependency("bufferView",t.bufferView)):n.push(null),t.sparse!==void 0&&(n.push(this.getDependency("bufferView",t.sparse.indices.bufferView)),n.push(this.getDependency("bufferView",t.sparse.values.bufferView))),Promise.all(n).then(function(a){const l=a[0],h=us[t.type],r=Z[t.componentType],p=r.BYTES_PER_ELEMENT,k=p*h,c=t.byteOffset||0,E=t.bufferView!==void 0?s.bufferViews[t.bufferView].byteStride:void 0,g=t.normalized===!0;let F,y;if(E&&E!==k){const f=Math.floor(c/E),D="InterleavedBuffer:"+t.bufferView+":"+t.componentType+":"+f+":"+t.count;let T=i.cache.get(D);T||(F=new r(l,f*E,t.count*E/p),T=new Ni(F,E/p),i.cache.add(D,T)),y=new te(T,h,c%E/p,g)}else l===null?F=new r(t.count*h):F=new r(l,c,t.count*h),y=new cs(F,h,g);if(t.sparse!==void 0){const f=us.SCALAR,D=Z[t.sparse.indices.componentType],T=t.sparse.indices.byteOffset||0,C=t.sparse.values.byteOffset||0,m=new D(a[1],T,t.sparse.count*f),x=new r(a[2],C,t.sparse.count*h);l!==null&&(y=new cs(y.array.slice(),y.itemSize,y.normalized));for(let w=0,M=m.length;w<M;w++){const S=m[w];if(y.setX(S,x[w*h]),h>=2&&y.setY(S,x[w*h+1]),h>=3&&y.setZ(S,x[w*h+2]),h>=4&&y.setW(S,x[w*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const i=this.json,s=this.options,n=i.textures[e].source,a=i.images[n];let l=this.textureLoader;if(a.uri){const h=s.manager.getHandler(a.uri);h!==null&&(l=h)}return this.loadTextureImage(e,n,l)}loadTextureImage(e,i,s){const t=this,n=this.json,a=n.textures[e],l=n.images[i],h=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[h])return this.textureCache[h];const r=this.loadImageSource(i,s).then(function(p){p.flipY=!1,p.name=a.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const c=(n.samplers||{})[a.sampler]||{};return p.magFilter=Gs[c.magFilter]||$s,p.minFilter=Gs[c.minFilter]||si,p.wrapS=Us[c.wrapS]||Fs,p.wrapT=Us[c.wrapT]||Fs,t.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[h]=r,r}loadImageSource(e,i){const s=this,t=this.json,n=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(k=>k.clone());const a=t.images[e],l=self.URL||self.webkitURL;let h=a.uri||"",r=!1;if(a.bufferView!==void 0)h=s.getDependency("bufferView",a.bufferView).then(function(k){r=!0;const c=new Blob([k],{type:a.mimeType});return h=l.createObjectURL(c),h});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(h).then(function(k){return new Promise(function(c,E){let g=c;i.isImageBitmapLoader===!0&&(g=function(F){const y=new Is(F);y.needsUpdate=!0,c(y)}),i.load(ms.resolveURL(k,n.path),g,void 0,E)})}).then(function(k){return r===!0&&l.revokeObjectURL(h),k.userData.mimeType=a.mimeType||Ke(a.uri),k}).catch(function(k){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),k});return this.sourceCache[e]=p,p}assignTexture(e,i,s,t){const n=this;return this.getDependency("texture",s.index).then(function(a){if(!a)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(a=a.clone(),a.channel=s.texCoord),n.extensions[A.KHR_TEXTURE_TRANSFORM]){const l=s.extensions!==void 0?s.extensions[A.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const h=n.associations.get(a);a=n.extensions[A.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),n.associations.set(a,h)}}return t!==void 0&&(a.colorSpace=t),e[i]=a,a})}assignFinalMaterial(e){const i=e.geometry;let s=e.material;const t=i.attributes.tangent===void 0,n=i.attributes.color!==void 0,a=i.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+s.uuid;let h=this.cache.get(l);h||(h=new Ii,ds.prototype.copy.call(h,s),h.color.copy(s.color),h.map=s.map,h.sizeAttenuation=!1,this.cache.add(l,h)),s=h}else if(e.isLine){const l="LineBasicMaterial:"+s.uuid;let h=this.cache.get(l);h||(h=new Oi,ds.prototype.copy.call(h,s),h.color.copy(s.color),h.map=s.map,this.cache.add(l,h)),s=h}if(t||n||a){let l="ClonedMaterial:"+s.uuid+":";t&&(l+="derivative-tangents:"),n&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let h=this.cache.get(l);h||(h=s.clone(),n&&(h.vertexColors=!0),a&&(h.flatShading=!0),t&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(l,h),this.associations.set(h,this.associations.get(s))),s=h}e.material=s}getMaterialType(){return ii}loadMaterial(e){const i=this,s=this.json,t=this.extensions,n=s.materials[e];let a;const l={},h=n.extensions||{},r=[];if(h[A.KHR_MATERIALS_UNLIT]){const k=t[A.KHR_MATERIALS_UNLIT];a=k.getMaterialType(),r.push(k.extendParams(l,n,i))}else{const k=n.pbrMetallicRoughness||{};if(l.color=new V(1,1,1),l.opacity=1,Array.isArray(k.baseColorFactor)){const c=k.baseColorFactor;l.color.fromArray(c),l.opacity=c[3]}k.baseColorTexture!==void 0&&r.push(i.assignTexture(l,"map",k.baseColorTexture,es)),l.metalness=k.metallicFactor!==void 0?k.metallicFactor:1,l.roughness=k.roughnessFactor!==void 0?k.roughnessFactor:1,k.metallicRoughnessTexture!==void 0&&(r.push(i.assignTexture(l,"metalnessMap",k.metallicRoughnessTexture)),r.push(i.assignTexture(l,"roughnessMap",k.metallicRoughnessTexture))),a=this._invokeOne(function(c){return c.getMaterialType&&c.getMaterialType(e)}),r.push(Promise.all(this._invokeAll(function(c){return c.extendMaterialParams&&c.extendMaterialParams(e,l)})))}n.doubleSided===!0&&(l.side=ei);const p=n.alphaMode||ys.OPAQUE;if(p===ys.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===ys.MASK&&(l.alphaTest=n.alphaCutoff!==void 0?n.alphaCutoff:.5)),n.normalTexture!==void 0&&a!==is&&(r.push(i.assignTexture(l,"normalMap",n.normalTexture)),l.normalScale=new N(1,1),n.normalTexture.scale!==void 0)){const k=n.normalTexture.scale;l.normalScale.set(k,k)}return n.occlusionTexture!==void 0&&a!==is&&(r.push(i.assignTexture(l,"aoMap",n.occlusionTexture)),n.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=n.occlusionTexture.strength)),n.emissiveFactor!==void 0&&a!==is&&(l.emissive=new V().fromArray(n.emissiveFactor)),n.emissiveTexture!==void 0&&a!==is&&r.push(i.assignTexture(l,"emissiveMap",n.emissiveTexture,es)),Promise.all(r).then(function(){const k=new a(l);return n.name&&(k.name=n.name),K(k,n),i.associations.set(k,{materials:e}),n.extensions&&ss(t,k,n),k})}createUniqueName(e){const i=Pi.sanitizeNodeName(e||"");let s=i;for(let t=1;this.nodeNamesUsed[s];++t)s=i+"_"+t;return this.nodeNamesUsed[s]=!0,s}loadGeometries(e){const i=this,s=this.extensions,t=this.primitiveCache;function n(l){return s[A.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,i).then(function(h){return Vs(h,l,i)})}const a=[];for(let l=0,h=e.length;l<h;l++){const r=e[l],p=Ue(r),k=t[p];if(k)a.push(k.promise);else{let c;r.extensions&&r.extensions[A.KHR_DRACO_MESH_COMPRESSION]?c=n(r):c=Vs(new Hi,r,i),t[p]={primitive:r,promise:c},a.push(c)}}return Promise.all(a)}loadMesh(e){const i=this,s=this.json,t=this.extensions,n=s.meshes[e],a=n.primitives,l=[];for(let h=0,r=a.length;h<r;h++){const p=a[h].material===void 0?je(this.cache):this.getDependency("material",a[h].material);l.push(p)}return l.push(i.loadGeometries(a)),Promise.all(l).then(function(h){const r=h.slice(0,h.length-1),p=h[h.length-1],k=[];for(let E=0,g=p.length;E<g;E++){const F=p[E],y=a[E];let f;const D=r[E];if(y.mode===I.TRIANGLES||y.mode===I.TRIANGLE_STRIP||y.mode===I.TRIANGLE_FAN||y.mode===void 0)f=n.isSkinnedMesh===!0?new ji(F,D):new ti(F,D),f.isSkinnedMesh===!0&&f.normalizeSkinWeights(),y.mode===I.TRIANGLE_STRIP?f.geometry=js(f.geometry,Ys):y.mode===I.TRIANGLE_FAN&&(f.geometry=js(f.geometry,fs));else if(y.mode===I.LINES)f=new vi(F,D);else if(y.mode===I.LINE_STRIP)f=new Gi(F,D);else if(y.mode===I.LINE_LOOP)f=new Ui(F,D);else if(y.mode===I.POINTS)f=new Ki(F,D);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(f.geometry.morphAttributes).length>0&&Ge(f,n),f.name=i.createUniqueName(n.name||"mesh_"+e),K(f,n),y.extensions&&ss(t,f,y),i.assignFinalMaterial(f),k.push(f)}for(let E=0,g=k.length;E<g;E++)i.associations.set(k[E],{meshes:e,primitives:E});if(k.length===1)return k[0];const c=new Es;i.associations.set(c,{meshes:e});for(let E=0,g=k.length;E<g;E++)c.add(k[E]);return c})}loadCamera(e){let i;const s=this.json.cameras[e],t=s[s.type];if(!t){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?i=new ni(Vi.radToDeg(t.yfov),t.aspectRatio||1,t.znear||1,t.zfar||2e6):s.type==="orthographic"&&(i=new qi(-t.xmag,t.xmag,t.ymag,-t.ymag,t.znear,t.zfar)),s.name&&(i.name=this.createUniqueName(s.name)),K(i,s),Promise.resolve(i)}loadSkin(e){const i=this.json.skins[e],s=[];for(let t=0,n=i.joints.length;t<n;t++)s.push(this._loadNodeShallow(i.joints[t]));return i.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",i.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(t){const n=t.pop(),a=t,l=[],h=[];for(let r=0,p=a.length;r<p;r++){const k=a[r];if(k){l.push(k);const c=new ls;n!==null&&c.fromArray(n.array,r*16),h.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[r])}return new Xi(l,h)})}loadAnimation(e){const s=this.json.animations[e],t=s.name?s.name:"animation_"+e,n=[],a=[],l=[],h=[],r=[];for(let p=0,k=s.channels.length;p<k;p++){const c=s.channels[p],E=s.samplers[c.sampler],g=c.target,F=g.node,y=s.parameters!==void 0?s.parameters[E.input]:E.input,f=s.parameters!==void 0?s.parameters[E.output]:E.output;g.node!==void 0&&(n.push(this.getDependency("node",F)),a.push(this.getDependency("accessor",y)),l.push(this.getDependency("accessor",f)),h.push(E),r.push(g))}return Promise.all([Promise.all(n),Promise.all(a),Promise.all(l),Promise.all(h),Promise.all(r)]).then(function(p){const k=p[0],c=p[1],E=p[2],g=p[3],F=p[4],y=[];for(let f=0,D=k.length;f<D;f++){const T=k[f],C=c[f],m=E[f],x=g[f],w=F[f];if(T===void 0)continue;T.updateMatrix();let M;switch(U[w.path]){case U.weights:M=ae;break;case U.rotation:M=Os;break;case U.position:case U.scale:default:M=ne;break}const S=T.name?T.name:T.uuid,X=x.interpolation!==void 0?He[x.interpolation]:ai,q=[];U[w.path]===U.weights?T.traverse(function(b){b.morphTargetInfluences&&q.push(b.name?b.name:b.uuid)}):q.push(S);let H=m.array;if(m.normalized){const b=Cs(H.constructor),G=new Float32Array(H.length);for(let O=0,Q=H.length;O<Q;O++)G[O]=H[O]*b;H=G}for(let b=0,G=q.length;b<G;b++){const O=new M(q[b]+"."+U[w.path],C.array,H,X);x.interpolation==="CUBICSPLINE"&&(O.createInterpolant=function(rs){const ts=this instanceof Os?Pe:li;return new ts(this.times,this.values,this.getValueSize()/3,rs)},O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(O)}}return new zi(t,void 0,y)})}createNodeMesh(e){const i=this.json,s=this,t=i.nodes[e];return t.mesh===void 0?null:s.getDependency("mesh",t.mesh).then(function(n){const a=s._getNodeRef(s.meshCache,t.mesh,n);return t.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let h=0,r=t.weights.length;h<r;h++)l.morphTargetInfluences[h]=t.weights[h]}),a})}loadNode(e){const i=this.json,s=this,t=i.nodes[e],n=s._loadNodeShallow(e),a=[],l=t.children||[];for(let r=0,p=l.length;r<p;r++)a.push(s.getDependency("node",l[r]));const h=t.skin===void 0?Promise.resolve(null):s.getDependency("skin",t.skin);return Promise.all([n,Promise.all(a),h]).then(function(r){const p=r[0],k=r[1],c=r[2];c!==null&&p.traverse(function(E){E.isSkinnedMesh&&E.bind(c,Ve)});for(let E=0,g=k.length;E<g;E++)p.add(k[E]);return p})}_loadNodeShallow(e){const i=this.json,s=this.extensions,t=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const n=i.nodes[e],a=n.name?t.createUniqueName(n.name):"",l=[],h=t._invokeOne(function(r){return r.createNodeMesh&&r.createNodeMesh(e)});return h&&l.push(h),n.camera!==void 0&&l.push(t.getDependency("camera",n.camera).then(function(r){return t._getNodeRef(t.cameraCache,n.camera,r)})),t._invokeAll(function(r){return r.createNodeAttachment&&r.createNodeAttachment(e)}).forEach(function(r){l.push(r)}),this.nodeCache[e]=Promise.all(l).then(function(r){let p;if(n.isBone===!0?p=new Yi:r.length>1?p=new Es:r.length===1?p=r[0]:p=new Js,p!==r[0])for(let k=0,c=r.length;k<c;k++)p.add(r[k]);if(n.name&&(p.userData.name=n.name,p.name=a),K(p,n),n.extensions&&ss(s,p,n),n.matrix!==void 0){const k=new ls;k.fromArray(n.matrix),p.applyMatrix4(k)}else n.translation!==void 0&&p.position.fromArray(n.translation),n.rotation!==void 0&&p.quaternion.fromArray(n.rotation),n.scale!==void 0&&p.scale.fromArray(n.scale);return t.associations.has(p)||t.associations.set(p,{}),t.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const i=this.extensions,s=this.json.scenes[e],t=this,n=new Es;s.name&&(n.name=t.createUniqueName(s.name)),K(n,s),s.extensions&&ss(i,n,s);const a=s.nodes||[],l=[];for(let h=0,r=a.length;h<r;h++)l.push(t.getDependency("node",a[h]));return Promise.all(l).then(function(h){for(let p=0,k=h.length;p<k;p++)n.add(h[p]);const r=p=>{const k=new Map;for(const[c,E]of t.associations)(c instanceof ds||c instanceof Is)&&k.set(c,E);return p.traverse(c=>{const E=t.associations.get(c);E!=null&&k.set(c,E)}),k};return t.associations=r(n),n})}}function Xe(d,e,i){const s=e.attributes,t=new he;if(s.POSITION!==void 0){const l=i.json.accessors[s.POSITION],h=l.min,r=l.max;if(h!==void 0&&r!==void 0){if(t.set(new L(h[0],h[1],h[2]),new L(r[0],r[1],r[2])),l.normalized){const p=Cs(Z[l.componentType]);t.min.multiplyScalar(p),t.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const n=e.targets;if(n!==void 0){const l=new L,h=new L;for(let r=0,p=n.length;r<p;r++){const k=n[r];if(k.POSITION!==void 0){const c=i.json.accessors[k.POSITION],E=c.min,g=c.max;if(E!==void 0&&g!==void 0){if(h.setX(Math.max(Math.abs(E[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(E[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(E[2]),Math.abs(g[2]))),c.normalized){const F=Cs(Z[c.componentType]);h.multiplyScalar(F)}l.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}t.expandByVector(l)}d.boundingBox=t;const a=new le;t.getCenter(a.center),a.radius=t.min.distanceTo(t.max)/2,d.boundingSphere=a}function Vs(d,e,i){const s=e.attributes,t=[];function n(a,l){return i.getDependency("accessor",a).then(function(h){d.setAttribute(l,h)})}for(const a in s){const l=As[a]||a.toLowerCase();l in d.attributes||t.push(n(s[a],l))}if(e.indices!==void 0&&!d.index){const a=i.getDependency("accessor",e.indices).then(function(l){d.setIndex(l)});t.push(a)}return K(d,e),Xe(d,e,i),Promise.all(t).then(function(){return e.targets!==void 0?ve(d,e.targets,i):d})}const ze={id:"main"},Ye={__name:"摩托车",setup(d){let e=new _({color:"#6e2121",metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03}),i=new _({color:"#c0c0c0",metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03}),s=new _({color:"#5E2612",metalness:0,roughness:1}),t=new _({color:"#000000",metalness:0,roughness:1,clearcoat:0,clearcoatRoughness:.33}),n=new _({color:"#000000",metalness:0,roughness:1,clearcoat:0,clearcoatRoughness:.33});class a{constructor(h){this.container=document.querySelector(h),this.scene,this.camera,this.renderer,this.controls,this.init(),this.animate()}init(){this.initScene(),this.initAxesHelper(),this.initLight(),this.initMesh(),this.initCamera(),this.initRender(),this.initControls(),this.initFloor(),window.addEventListener("resize",this.onWindowResize.bind(this))}initScene(){this.scene=new pe,this.scene.background=new V(10526880)}initAxesHelper(){const h=new oe(5);this.scene.add(h)}initLight(){const h=new ke(16777215,4473924);h.intensity=.6,this.scene.add(h);const r=new Qs;r.position.set(5,5,5),this.scene.add(r);const p=new Zs(16777215,.8);p.angle=Math.PI/8,p.penumbra=.1,p.decay=2,p.distance=30,p.shadow.radius=10,p.shadow.mapSize.set(4096,4096),p.position.set(-5,5,1),p.target.position.set(0,0,0),p.castShadow=!0,this.scene.add(p)}initCamera(){this.camera=new ni(75,this.container.offsetWidth/this.container.offsetHeight,.1,100),this.camera.position.set(1.5,1.5,1.5)}initRender(){this.renderer=new ce({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight),this.container.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0}render(){this.renderer.render(this.scene,this.camera),this.controls.update()}animate(){this.renderer.setAnimationLoop(this.render.bind(this))}initControls(){this.controls=new Ee(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.maxDistance=9,this.controls.minDistance=1,this.controls.minPolarAngle=0,this.controls.maxPolarAngle=80/360*2*Math.PI}onWindowResize(){this.camera.aspect=this.container.offsetWidth/this.container.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight)}addGLTFModel(h){return new Promise((r,p)=>{new ge().load(h,c=>{const E=c.scene;E.traverse(g=>{g.name==="网格457"?g.material=e:g.name==="网格457_1"||(g.name==="网格457_2"?g.material=s:g.name==="网格457_4"?g.material=n:g.name==="网格457_3"||g.name==="网格457_5"||g.name==="网格457_6"?g.material=i:g.name==="网格457_7"&&(g.material=t)),g.castShadow=!0}),this.scene.add(E),r(this.modelName+"模型添加成功")})})}initMesh(){this.addGLTFModel("https://qiniuyun.study.weilh.vip/motor03.gltf")}initFloor(){const h=new de(20,20),r=new _({color:8421504,side:ei,metalness:0,roughness:.1}),p=new ti(h,r);p.rotation.x=Math.PI/2,p.receiveShadow=!0,this.scene.add(p)}initGUI(){}}return Di(()=>{new a("#main")}),(l,h)=>(qs(),Xs("div",ze))}},We=Ti(Ye,[["__scopeId","data-v-4cd148dc"]]),Ze=as("h1",{id:"摩托车",tabindex:"-1"},[zs("摩托车 "),as("a",{class:"header-anchor",href:"#摩托车","aria-label":'Permalink to "摩托车"'},"​")],-1),Qe=as("h2",{id:"效果展示",tabindex:"-1"},[zs("效果展示 "),as("a",{class:"header-anchor",href:"#效果展示","aria-label":'Permalink to "效果展示"'},"​")],-1),Je=bi(`<h2 id="示例代码" tabindex="-1">示例代码 <a class="header-anchor" href="#示例代码" aria-label="Permalink to &quot;示例代码&quot;">​</a></h2><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		onMounted</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		withBase</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitepress&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> THREE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;three&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //导入three.js核心库</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		OrbitControls</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;three/examples/jsm/controls/OrbitControls.js&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //导入轨道控制器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		GLTFLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;three/examples/jsm/loaders/GLTFLoader.js&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //导入GLTF模型加载器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 车身材质</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bodyMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshPhysicalMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#6e2121&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		metalness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		roughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoat: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoatRoughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.03</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//clear coat层的粗糙度，由0.0到1.0。 默认为0.0 </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 车架</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frameMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshPhysicalMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#c0c0c0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		metalness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		roughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoat: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoatRoughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.03</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 车座</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> saddleMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshPhysicalMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#5E2612&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		metalness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		roughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		// clearcoat:1,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		// clearcoatRoughness:1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 轮胎</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tireMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshPhysicalMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#000000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		metalness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		roughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoat: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoatRoughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.33</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 把手</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handleMaterial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshPhysicalMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#000000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		metalness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		roughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoat: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clearcoatRoughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.33</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> motor3d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selector) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//获取容器</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.camera</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//初始化</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//循环函数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化场景</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initScene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化辅助轴</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initAxesHelper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化灯光</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化Mesh</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化相机</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initCamera</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化渲染器</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化轨道控制器</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initControls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 初始化地面</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initFloor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 监听场景大小改变，重新渲染尺寸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;resize&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onWindowResize.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initScene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene.background </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xa0a0a0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initAxesHelper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> axesHelper</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AxesHelper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(axesHelper)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> hesLight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HemisphereLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xffffff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x444444</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			hesLight.intensity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.6</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hesLight)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dirLight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DirectionalLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			dirLight.position.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dirLight)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			//聚光灯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sportLight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SpotLight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xffffff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.angle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//散射角度，跟水平线的夹角</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.penumbra </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 聚光锥的半影衰减百分比</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.decay </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 纵向：沿着光照距离的衰减量。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.distance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.shadow.radius </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 阴影映射宽度，阴影映射高度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.shadow.mapSize.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4096</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4096</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.position.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 光照射的方向</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.target.position.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			sportLight.castShadow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//开启阴影</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sportLight);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initCamera</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.camera </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PerspectiveCamera</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetHeight,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">				0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.camera.position.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WebGLRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				antialias: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//设置抗锯齿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			//设置屏幕像素比</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPixelRatio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window.devicePixelRatio)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			//渲染的尺寸大小</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetWidth, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetHeight)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 添加到容器</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.domElement)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 加载阴影</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.shadowMap.enabled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.camera)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAnimationLoop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.render.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initControls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrbitControls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.camera, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.domElement)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// enableDamping 将其设置为true以启用阻尼（惯性），这将给控制器带来重量感。默认值为false。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 请注意，如果该值被启用，你将必须在你的动画循环里调用.update()。</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls.enableDamping </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls.maxDistance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 9</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls.minDistance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls.minPolarAngle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controls.maxPolarAngle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 360</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		onWindowResize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.camera.aspect </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetHeight</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.camera.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateProjectionMatrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//更新矩阵，将3d内容投射到2d画面上转换</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetWidth, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.container.offsetHeight)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		// 加载模型</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		addGLTFModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">modelName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">				// const loader = new GLTFLoader().setPath(withBase(&#39;/asset/threejs/3dModels/&#39;))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">				const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> loader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GLTFLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				loader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(modelName, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">gltf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">					const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> motorModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gltf.scene</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					motorModel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">						if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">							// 车身</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">							obj.material </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bodyMaterial</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">							// 车灯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">							// obj.material = glassMaterial</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">							// 座位</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">							obj.material </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> saddleMaterial</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457_4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">							// 车把</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">							obj.material </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handleMaterial</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457_3&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457_5&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">							.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457_6&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">							// 车架</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">							obj.material </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frameMaterial</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;网格457_7&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">							// 轮胎</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">							obj.material </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tireMaterial</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						obj.castShadow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">					this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(motorModel)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">					resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.modelName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;模型添加成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// this.addGLTFModel(&#39;motor03.gltf&#39;)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addGLTFModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">				&#39;https://qiniuyun.study.weilh.vip/motor03.gltf&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initFloor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> floorGeometry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PlaneGeometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> material</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshPhysicalMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				color: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x808080</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				side: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.DoubleSide,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				metalness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				roughness: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> floorMesh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(floorGeometry, material)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			floorMesh.rotation.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			floorMesh.receiveShadow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(floorMesh)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		initGUI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				bodyColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#6e2121&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 车身颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				frameColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#c0c0c0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 车架颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				saddleColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#5E2612&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 车座颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				tireColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#000000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 轮胎颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				handleColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#000000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 车把颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				glassColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#aaaaaa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> motor3d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#main&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	#main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		border</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> solid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> red</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p><a href="https://blog.csdn.net/w137160164/article/details/130233826" target="_blank" rel="noreferrer">Threejs进阶之一：基于vite+vue3+threejs构建三维场景</a></p>`,4),et=JSON.parse('{"title":"摩托车","description":"","frontmatter":{},"headers":[],"relativePath":"js/threejs/demos/摩托车.md","filePath":"js/threejs/demos/摩托车.md","lastUpdated":1722501543000}'),$e={name:"js/threejs/demos/摩托车.md"},tt=Object.assign($e,{setup(d){return(e,i)=>(qs(),Xs("div",null,[Ze,Qe,Bi(We),Je]))}});export{et as __pageData,tt as default};
